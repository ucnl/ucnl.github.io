| ![logo](https://ucnl.github.io/documentation/sm_logo.png) | ![logo](https://ucnl.github.io/documentation/redbutton.png) |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | Crimea-300 датчик давления <br/> Спецификация устройства |


## ОСОБЕННОСТИ

* **Минимальные гарабариты и масса**
* **Полное отсутствие корродирующих элементов**
* **Моноблочный литой полиуретановый корпус**
* **Простой NMEA-подобный протокол**

## ОПИСАНИЕ

Подводный переключатель **RedButton** специально разработан для применения водолазами. Устройство не имеет обслуживаемых и подверженных коррозии частей.
Имеет высокую надежность и наработку на отказ сравнению с пружинными штоковыми конструкциями и пьезокнопками.
  
<div style="page-break-after: always;"></div>

## ТЕХНИЧЕСКИЕ ХАРАКТЕРИСТИКИ

| ПАРАМЕТР | ЗНАЧЕНИЕ |
| :--- | :--- |
| ГАБАРИТЫ (Ф ч х h)| 21 x 50 мм |
| МАКСИМАЛЬНАЯ РАБОЧАЯ ГЛУБИНА | 300 м |
| ДЛИНА КАБЕЛЯ<sup>[2](#footnote2)</sup> | 0.5 м |
| ДИАМЕТР КАБЕЛЯ | 5 мм |
| МАТЕРИАЛ ИЗОЛЯЦИИ КАБЕЛЯ | Полиуретан |
| МАТЕРИАЛ КОРПУСА | Полиуретан |
| ДИАПАЗОН РАБОЧИХ ТЕМПЕРАТУР | -10 .. 60 °С |
| ДИАПАЗОН ИЗМЕРЯЕМЫХ ДАВЛЕНИЙ | 0 .. 30 Бар |
| ПОГРЕШНОСТЬ ИЗМЕРЕНИЯ ДАВЛЕНИЯ (Диапазон 0 .. 6 Бар | +/- 60 мБар |
| ПОГРЕШНОСТЬ ИЗМЕРЕНИЯ ДАВЛЕНИЯ (Диапазон 0 .. 20 Бар | +/- 150 мБар |
| ПОГРЕШНОСТЬ ИЗМЕРЕНИЯ ДАВЛЕНИЯ (Диапазон 0 .. 30 Бар | +/- 350 мБар |
| РАЗРЕШЕНИЕ ПО ДАВЛЕНИЮ | 4 мБар |
| ДИАПАЗОН ИЗМЕРЯЕМЫХ ТЕМПЕРАТУР | -10 .. 60 °С |
| ПОГРЕШНОСТЬ ИЗМЕРЕНИЯ ТЕМПЕРАТУРЫ (Диапазон 0 .. 10 Бар) | +/- 2.5 °С |
| РАЗРЕШЕНИЕ ПО ТЕМПЕРАТУРЕ | 0.1 °C |
| НАПРЯЖЕНИЕ ПИТАНИЯ | 5 .. 12 В |
| ПОТРЕБЛЯЕМЫЙ ТОК | 10 .. 70 мА |
| ВХОДНОЕ НАПРЯЖЕНИЕ ЛИНИЙ ДАННЫХ (исполнение с интерфейсом UART) | 0 .. 3.3 В |
| ВЫХОДНОЕ НАПРЯЖЕНИЕ ЛИНИЙ ДАННЫХ (исполнение с интерфейсом UART) | 0 .. 3.3 В |
| ЦВЕТ КОРПУСА<sup>[3](#footnote1)</sup> | Черный |
| ПРОТОКОЛ СОПРЯЖЕНИЯ | NMEA0183-подобный |

________________
<a name="footnote1"><sup>1</sup></a> С учетом кабеля станартной длины.  
<a name="footnote2"><sup>2</sup></a> Параметр может быть изменен по договоренности.  
<a name="footnote3"><sup>3</sup></a> Указан цвет по умолчанию. Доступны другие цвета: черный, желтный, зеленый, синий. Возможно окрашивание в любой цвет по каталогу RAL при заказе от 50 шт.  

<div style="page-break-after: always;"></div>

## ПРОТОКОЛ СОПРЯЖЕНИЯ

### 1. Общая информация
Датчики Crimea-300 поставляются в двух исполнениях:  
- с электрическим интерфейсом UART
- с электрическим интерфейсом RS-485

#### 1.1. Протокол физического уровеня
   
В зависимости от исполнения, устройство поддерживает информационное сопряжение:  
- при помощи стандарта физического уровня RS-232 для асинхронного интерфейса (UART) c напряжением линии данных 3.3 Вольт
- при помощи стандарта физического уровня RS-485

Подключение производится при помощи четырехпроводного кабеля:

##### Таблица 1 - Назначение жил кабеля для исполнения с интерфейсом UART 3.3 В (Вариант кабеля 1)

| №| Цвет жилы | Функция | 
| :--- | :--- | :--- |
| 1 | Зеленый | +5 .. + 12 Вольт |
| 2 | Черный | Tx |
| 3 | Белый/Прозрачный | Rx |
| 4 | Оплетка | Общий |

##### Таблица 2 - Назначение жил кабеля для исполнения с интерфейсом UART 3.3 В (Вариант кабеля 2)

| №| Цвет жилы | Функция | 
| :--- | :--- | :--- |
| 1 | Красный | +5 .. + 12 Вольт |
| 2 | Зеленый | Tx |
| 3 | Белый/Прозрачный | Rx |
| 4 | Оплетка | Общий |

> Без применения дополнительных повторителей и преобразователей интерфейса максимальная длинна шины данных для исполнения с интерфейсом UART, для которой гарантируется корректная работа интерфейса, составляет не более 2 метров.  

##### Таблица 3 - Назначение жил кабеля для исполнения с интерфейсом RS-485 (Вариант кабеля 1)

| №| Цвет жилы | Функция | 
| :--- | :--- | :--- |
| 1 | Зеленый | +5 .. + 12 Вольт |
| 2 | Черный | Общий |
| 3 | Белый/Прозрачный | A |
| 4 | Коричневый | B |

##### Таблица 4 - Назначение жил кабеля для исполнения с интерфейсом RS-485 (Вариант кабеля 2)

| №| Цвет жилы | Функция | 
| :--- | :--- | :--- |
| 1 | Красный | +5 .. + 12 Вольт |
| 2 | Зеленый | A |
| 3 | Белый/Прозрачный | B |
| 4 | Оплетка | Общий |

Настройки порта подключения:  
> _Baudrate: 9600 bit/s_  
> _Data bits: 8_  
> _Stop bits: 1_  
> _Parity: No_  
> _Hardware flow control: No_  

### 1.2. Стандарт протокола диалогового уровня NMEA0183
Стандарт NMEA0183 описывает формат текстовых (ASCII) сообщений диалогового уровня.  

Пример сообщения:  **`$PTNT1,01,00*hh<СR><LF>`**  

Основные элементы посылки (сообщения, sentence) NMEА0183:
* '$' - начало сообщения,
* 'P' - Proprietary, проприетарный код
* 'TNT' - трехбуквенный идентификатор производителя
* '0' - идентификатор сообщения
* ',' - запятая (разделитель параметров)  
* '*' - разделитель контрольной суммы
* 'hh' - контрольная сумма в шестнадцатеричном формате (например FF, 01). Рассчитывается как побитовый XOR всех байт между '$' и '*'.
* \<CR\>\<LF\> - конец сообщения (перевод строки)


<div style="page-break-after: always;"></div>

## 2. Система команд TNT для устройств Crimea-300
Префикс **D2H** в наименовании сообщений означает, что оно передается от устройства (Device) к управляющей системе (Host).
Префикс **H2D** в наименовании сообщений означает, что оно передается от управляющей системы (Host) к устройству (Device).

### 2.1. IC_D2H_ACK
Сообщение IC_D2H_ACK - реакция устройства на поступивший от управляющей системы запрос  

Формат сообщения: **`$PTNT0,x,x*hh<CR><LF>`**  

| Поле/Параметр |	Описание |
| :--- | :--- |
| $	| Начало сообщения '$' |
| PUWV	| UWV |
| 0	| Идентификатор сообщения |
| cmdID	| Идентификатор обрабатываемой команды (на которую устройство отреагировало) |
| errCode	| Error code \([см. 4.1](#41-%D0%BA%D0%BE%D0%B4%D1%8B-%D0%BE%D1%88%D0%B8%D0%B1%D0%BE%D0%BA)\) |
| *	| Разделитель контрольной суммы NMEA |
| hh	| Контрольная сумма NMEA |
| \<CR\>\<LF\> | Конец сообщения |


