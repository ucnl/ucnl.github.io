| ![logo](/documentation/sm_logo.png) |  |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | **uWAVE** семейство устройств гидроакустической связи <br/> История версий и изменений |
  
  
  
# uWAVE <br/> История версий и изменений

<div style="page-break-after: always;"></div>

## 0. Версии

| Актуальная версия ПО | **uWave [JULY] 1.31** от 31-JAN-2022 |
| :--- | :--- |
| | |

| Дата | Версия встроенного ПО | Описание |
| :--- | :--- | :--- |
| 31-JAN-2022 | System: (все) <br/> Core: uWAVE [JULY] v1.31 | - BUG FIX: исправлена ошибка из-за которой сообщение о доставленном пакете приходило вместе с сообщением ACK на предыдущую команду <br/> - Почти в 4 раза уменьшен объем прошивки за счет обширного рефакторинга  |
| 10-DEC-2021 | System: (все) <br/> Core: uWAVE [JULY] v1.30 | С этой версии при активной настройке IsCmdModeByDefault командная жила становится не входной, а выходной. По ней передается цифровой стробирующий сигнал синхронизированный с моментом излучения и приема. <br/> + Вводится режим AUTO QUERY / PINGER: Модем может быть сконфигурирован таким образом, что он будет или автоматически запрашивать модем с заданными параметрами каналов, или запрашивать заданного абонента в пакетном режиме, или с заданным периодом излучать сигнал со своей глубиной, температурой, напряжением питания или поочередно все три параметра. Сигнал такого пингера может теперь приниматься другими модемами (не запрашивающими) |
| 27-SEP-2021 | System: (все) <br/> Core: uWAVE [JULY] v1.24 | - BUG FIX: исправлена ошибка из-за которой было невозможно прервать повторные попытки передачи пакетного сообщения |
| 17-SEP-2021 | System: (все) <br/> Core: uWAVE [JULY] v1.23 | - BUG FIX: исправлена ошибка которая в редких случаях могла приводить к зависанию модема в режиме ожидания удаленного запроса |
| 30-AUG-2021 | System: (все), <br/> Core: uWAVE [JULY] v1.22 | - BUG FIX: исправлена ошибка которая могла приводить к нарушению работы интерфейса по направлению от модема к пользователю при работе с командными запросами |
| 08-JUL-2021 | System: (все), <br/> Core: uWAVE [JULY] v1.21 | - BUG FIX: исправлена некорректная работа передатчика в режиме прозрачного канала, приводившая к тому, что при поступлении новых данных по UART в момент окончания передачи, новые данные могли не передаваться <br/> +/- Изменены форматы сообщений пакетного режима: добавлено поле для горизонтального угла прихода (для устройств uWAVE USBL) <br/> + Поддерживается измерение дальности и запросы глубины, температуры и напряжения питания в рамках логической адресации пакетного режима |
| 28-JUN-2021 | System: (все), <br/> Core: uWAVE [JULY] v1.20 | + Пакетный режим более не требуется включать отдельно (он всегда включен). Модем может принимать сообщения пакетного режима, находясь в как в режиме прозрачного канала, так и в командном режиме |
| 21-JUN-2021 | System: --- | + Альтернативные прошивки со скоростями: <br/> 156 бит/с (System: Easy) <br/> 314 бит/с (System: Lite) <br/> Альтернативные режимы испытаны в реальном водоеме на дистанции 500 м |
| 14-MAY-2021 | System: STRONG 2.0, <br/> Core: uWAVE [JULY] v1.10 | + Пакетный режим (гарантированная доставка, ALO - At-least-once, логическая адресация) <br/> - Устранена ошибка: Идентификаторы каналов Tx/Rx в кодовых запросах |
| 21-DEC-2019 | System: STRONG 1.0, <br/> Core: uWAVE [JULY] v1.08 | + Добавлена настройка ускорения свободного падения для более точного определения глубины |    


## 1. Особенности и сложные вопросы

### 1.1. Переключение в командный режим и обратно
Изменение состояния сервисной жилы более приоритетно по отношению к передаче или приему данных. Если жила не притянута к земле, на некоторых моделях преобразователях интерфейсов в момент передачи в режиме прозрачного канала на кабеле может наводиться помеха. Это приводит к тому, что в процессе передачи модем может переключиться в командный режим, что может привести к преждевременному завершению передачи данных. Для исключения данной ситуации сервисная жила не должна оставться неподключенной.

### 1.2. Использование одного и того же кодового канала для приема и передачи
Использование одного и того же кодового канала для приема и передачи в некоторых малых акваториях может привести к такой ситуации, когда при работе с короткими кодовыми запросами, запрашивающий модем может принять отраженный от берега или иных объектов собственный запросный сигнал. Это не является ошибкой или недоработкой модема, но следствием законов распространения звука в воде. Поэтому рекомендуется использовать разные кодовые каналы для приема и передачи.

### 1.3. Ошибка 'TX Busy' при попытки отправить что-либо сразу после получения сообщения в пакетном режиме
При получении сообщения в пакетном режиме модем сразу отправляет подтверждение о получении, поэтому его передатчик занят. Пользователь может задействовать настройку 'ACK On TX Finished' для того, чтобы модем информировал его каждый раз, когда передача завершена. Альтернативным способом обработки этой ситуации является выдерживание паузы или повторная попытка передачи через время порядка 500 миллисекунд.

### 1.4. Любая запись во флеш сохраняет **все** текущие настройки
Модемы поддерживают несколько групп настроек: основные, настройки выдачи параметров окружающей среды, настроки пакетного режима и настройки режима автозапрос/пингер. Так как все настройки модема сохраняются в общей области энергонезависимой памяти, то любая запись во флеш приведет к сохранению настроек.

________  
                    
<div style="page-break-after: always;"></div>
