<div style="page-break-after: always;"></div>

| ![logo](/documentation/sm_logo.png) |  |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | **uWave** - семейство устройств гидроакустической цифровой связи <br/> Краткое описание |
    
# Семейство устройств uWave <br/> Краткое описание

<div style="page-break-after: always;"></div>

## 1. Устройства семейства

Семейство **uWave** (_читается: "мю-вейв", или "ю-вейв"_) специально разработано для приложений, крайне чувствительных к массе и габаритам и представлена на текущий момент 
тремя устройствами:

* [uWave](uWAVE_Specification_ru.md) - гидроакустический модем. Является самым маленьким в мире гидроакустическим модемом: его размер всего **Ф40х45** мм, 
а сухой вес не превышает 160 грамм. При таких параметрах  он позволяет передавать данные на дистанции более **1000** метров.
* [uWave Max OEM](uWAVE_Max_OEM_Specification_ru.md) - гидроакустический модем. Усиленная версия базового устройства. За счет увеличенной гидроакустической антенны и усилителя мощности позволяет передавать данные на дистанции более **3000** метров. Поставляется в виде модуля печатной платы модема и гидроакустической антенны.
* [uWave Max](uWAVE_Max_Specification_ru.md) - гидроакустический модем. Усиленная версия базового устройства. За счет увеличенной гидроакустической антенны
и усилителя мощности позволяет передавать данные на дистанции более **3000** метров. Габариты при этом составляют **Ф62х65** мм, 
а сухой вес 360 грамм.
* [uWave USBL Modem](uWAVE_USBL_Modem_Specification_ru.md) - гидроакустический модем с функцией определения горизонтального угла прихода сигнала. 
Устройство снабжено фазированной антенной решеткой и встроенным инклинометром, что позволяет определять горизонтальное направление, 
с которого пришел сигнал от любых других устройств семейства **uWAVE**. Габариты [uWave USBL Modem](uWAVE_USBL_Modem_Specification_ru.md) **Ф64х128** мм, 
сухой вес устройства 440 грамм.

Более детальное сравнение характеристик устройств семейства в [Таблицах сравнения модемов uWave](uWAVE_Modems_comparison_ru.md).

Все устройства в рамках семейства полностью совместимы акустически и имеют общий, [NMEA-подобный протокол](uWAVE_Protocol_Specification_ru.md) сопряжения.

<div style="page-break-after: always;"></div>

## 2. Особенности акустического протокола и кодовые каналы
Акустический протокол передачи **uWave** реализует множественный доступ к среде с кодовым разделением (CDMA) и поддерживает 20 
изолирующих кодовых каналов. Любому устройству из семейства uWAVE могут быть настроены любые кодовые каналы для приема и передачи.

Изолирующий кодовый канал гарантирует, что данные, передаваемые в одном канале не будут приняты устройством, ведущим прием в любом 
другом кодовом канале. 

Все устройства семейства **uWave** могут одновременно вести прием только в одном кодовом канале.

### 2.1. Скорость передачи данных
Стандартным режимом для устройств **uWave** является режим со скоростью передачи данных **78 бит/с**. Этот режим обеспечивает максимальную дальность и надежность связи. Именно в этом режиме доступно наибольшее число кодовых каналов.

Все устройства семейства **uWave** поддерживают альтернативные режимы, обеспечивающие скорости передачи **156** и **314 бит/с**. Чем выше скорость - тем меньше помехустойчивость, а соответственно надежность и дальность связи. 

Разные скоростные режимы не совместимы между собой. Перевод модема в другой скоростной режим обеспечивается [заменой его встроенного ПО](uWAVE_FW_Updating_ru.md).


<div style="page-break-after: always;"></div>

## 3. Режимы работы устройств
Все устройства семейства могут работать в двух режимах, переключение между которыми осуществляется пользователем:
* Режим прозрачного канала
* Командный режим

Эти режимы определяют то, как модем воспринимает приходящие от управляющей системы данные:

### 3.1. Режим прозрачного канала
В режиме прозрачного канала устройства не анализируют приходящие от управляющей системы данные и без изменений транслируют их в 
гидроакустический канал, где они могут быть приняты любым устройством из семейства, ведущим прием в таком же кодовом канале, 
в каком производилась передача.

### 3.2. Командный режим
В командном режиме устройства анализируют приходящие от управляющей системы данные и взаимодействие с ними осуществляется в рамках 
очень простого [NMEA-подобного ASCII протокола](uWAVE_Protocol_Specification_ru.md).  
В этом режиме устройства позволяют передавать короткие кодовые запросы другим устройствам: запрашивать глубину, температуру, 
напряжение питания удаленного модема и передавать 8 пользовательских команд.  
Кодовые запросы имеют фиксированные длины запросных и ответных сигналов, что позволяет запрашивающей системе определять время 
распространения (и наклонную дальность) до запрашиваемой системы.

Удаленный модем принимает и обрабатывает кодовый запрос независимо от того, в каком режиме он находится, что снимает с пользовательской 
системы необходимость контролировать состояние удаленного модема.

Устройства [uWave USBL Modem](uWAVE_USBL_Modem_Specification_ru.md) позволяют определять горизонтальный угол 
прихода любого входящего сообщения от других устройств семейства **uWave**. В том числе и для пользовательских сообщений, передающихся в режиме прозрачного канала. 

### 3.2.1. Пакетный режим
Пакетный режим позволяет передвать пакеты данных с гарантированной доставкой (ALO - At-least-once), уведомлением о доставке адресату. В пакетном режиме поверх кодовых каналов используется логическая адресация до 254 абонентов (255 - широковещательный адрес без уведомления и гарантированной доставки). Пакетный режим может использоваться только когда модем находится в командном режиме.

<div style="page-break-after: always;"></div>

## 4. Оснащение устройств
Устройства [uWave](uWAVE_Specification_ru.md), [uWave Max](uWAVE_Max_Specification_ru.md) и [uWave Max OEM](uWAVE_Max_OEM_Specification_ru.md) имеют встроенный модуль измерения напряжения питания. Напряжение питания всех устройств семейства может быть запрошено удаленно любыми другими устройствами сеймейства.  
**Начиная с версии прошивки 1.30 при командном режиме включенном по умолчанию, жила кабеля SVC/CMD становится цифровым выходом. На который передаются стробирующие прямоугольные импульсы синхронизированные с моментом начала излучения и моментом обнаружения входящего сообщения. Данная опция позволяет строить на базе модемов навигационные системы.**

Устройства [uWave](uWAVE_Specification_ru.md), [uWave Max](uWAVE_Max_Specification_ru.md) и [uWave USBL Modem](uWAVE_USBL_Modem_Specification_ru.md) имеют встроенные датчики глубины/температуры. Показания глубины и температуры могут быть запрошены удаленно любыми устройствами семейства.

Устройства [uWave USBL Modem](uWAVE_USBL_Modem_Specification_ru.md) дополнительно имеют встроенные двухосевые инклинометры 
(измеряют углы крена и дифферента). пользователь может настроить выдачу этих данных в любых соотношениях или периодически, с заданной 
частотой (от 0.5 до 60 секунд) или тандемно - при поступлении любых данных от удаленных устройств. Показания инклинометра доступны только локально.

Все устройства оборудованные датчиками глубины/температуры, будучи включенными на воздухе производят автоматическую калибровку датчика давления, что позволяет исключить ошибку определения глубины, связанную с изменениями атмосферного давления и дрейфом нуля сенсора. Для достижения максимально возможной для 
данной технологии точности, устройство позволяет задать адекватное значение ускорение свободного падения для места проведения работ 
(например, согласно модели WGS84 Gravity, исключив тем самым влияние его изменения от географической широты).

Устройства  рассчитаны на максимальную глубину погружения 300 метров.

<div style="page-break-after: always;"></div>

## 5. Применение и интеграция

Все устройства семейства **uWave** сопрягаются с пользовательской системой при помощи физического интерфейса UART 3.3 В, и по умолчанию 
работают в режиме прозрачного канала. Для этого не требуется никакой дополнительной интеграции и настройки.

Для работы в командном режиме используется простой [NMEA-подобный ASCII протокол](uWAVE_Protocol_Specification_ru.md).

На нашем [GitHub](https://github.com/ucnl) представлены примеры с открытым исходным кодом для сопряжения устройств **uWAVE**:
* Библиотеки [uWave ALibs](https://github.com/ucnl/UCNL_ALibs) с примерами использования для платформы **Arduino**
* Библиотека (старая версия) [uWave ALib](https://github.com/ucnl/uWAVE_ALib) платформы **Arduino** для максимально простого использования всех возможностей модемов
* Библиотека [uWaveLib](https://github.com/ucnl/uWAVELib) (.NET)
* Демонстрационное ПО [uWave Host](https://github.com/ucnl/uWAVE_Host)
* Демонстрационный проект [uWave VLBL](https://github.com/ucnl/uWAVE_VLBL) - навигация на виртуальной длинной базе при помощи двух модемов [uWave](uWAVE_Specification_ru.md)
* [uMCPIno](https://github.com/AlekUnderwater/uMCPIno) - Протокол с грантированой доставкой и очередностью сообщений (реализации для Arduino, STM32 и .NET)
* Репозиторий (старая версия) с примерами работы модемов [uWave](uWAVE_Specification_ru.md) на платформе Arduino: [uWAVE_ALib](https://github.com/ucnl/uWAVE_ALib)

  
<div style="page-break-after: always;"></div>
  
