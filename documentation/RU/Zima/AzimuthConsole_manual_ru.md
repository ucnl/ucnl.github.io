[Главная](/README_RU) ❯ [Гидроакустические навигационные и трекинговые системы](/navigation_and_tracking_systems_ru) ❯ **AzimuthConsole: Руководство пользователя**

<div style="page-break-after: always;"></div>

| ![logo](/documentation/sm_logo.png) |  |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | **AzimuthConsole** - Кроссплатформенное приложение для работы с системой Zima2 USBL <br/> Руководство пользователя |

# AzimuthConsole <br/> Руководство пользователя

<div style="page-break-after: always;"></div>

## Содержание

- [1. Введение](#1-%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5)
  - [1.1. Поддерживаемые платформы](#11-%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D1%80%D0%B6%D0%B8%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5-%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D1%8B)
  - [1.2. Горячие клавиши](#12-%D0%B3%D0%BE%D1%80%D1%8F%D1%87%D0%B8%D0%B5-%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88%D0%B8)
  - [1.3. Поддерживаемые устройства]()
- [2. Команды управления](#2-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F)
  - [2.1. HELP](#21-help)
  - [2.2. SETM](#22-setm)
  - [2.3. SETA](#23-seta)
  - [2.4. SETO](#24-seto)
  - [2.5. SARP](#25-sarp)
  - [2.6. CLS](#26-cls)
  - [2.7. EXIT](#27-exit)
  - [2.8. OCON](#28-ocon)
  - [2.9. CCON](#29-ccon)
  - [2.10. CNA?](#210-cna)
  - [2.11. ITG?](#211-itg)
  - [2.12. DET?](#212-det)
  - [2.13. CREQ](#213-creq)
  - [2.14. LHO?](#214-lho)
  - [2.15. OFMT?](#215-ofmt)
  - [2.16. PITG](#216-pitg)
  - [2.17. RITG](#217-ritg)
  - [2.18. LHOV](#218-lhov)
  - [2.19. SRC3](#219-src3)
  - [2.20. HKEYS](#220-hkeys)
  - [2.21. PLAY](#221-play)
  - [2.22. RRA?](#222-rra)
  - [2.23. SRRA](#223-srra)
  - [2.24. SIOC](#224-sioc)
  - [2.25. FLTS](#225-flts)
  - [2.26. SETS](#226-sets)
- [3. Выходные данные](#3-%D0%B2%D1%8B%D1%85%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5)
  - [3.1. AZMLOC - локальные параметры](#31-azmloc---%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D1%8B)
  - [3.2. AZMREM - данные маяка-ответчика](#32-azmrem---%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BC%D0%B0%D1%8F%D0%BA%D0%B0-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%87%D0%B8%D0%BA%D0%B0)
- [4. Вспомогательные утилиты](#4-%D0%B2%D1%81%D0%BF%D0%BE%D0%BC%D0%BE%D0%B3%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D0%B5-%D1%83%D1%82%D0%B8%D0%BB%D0%B8%D1%82%D1%8B)
  - [4.1. AzimuthUDPRemote - UDP-терминал](#41-azimuthudpremote---udp-%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D0%B0%D0%BB)
  - [4.2. AzimuthUDPListener - UDP-приемник](#42-azimuthudplistener---udp-%D0%BF%D1%80%D0%B8%D0%B5%D0%BC%D0%BD%D0%B8%D0%BA)
- [5. Примеры](#5-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B)
  - [5.1. Командная строка](#51-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%B0%D1%8F-%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B0)
  - [5.2. Часто используемые команды](#52-%D1%87%D0%B0%D1%81%D1%82%D0%BE-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D0%B5-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B)
- [6. Часто задаваемые вопросы](#6-%D1%87%D0%B0%D1%81%D1%82%D0%BE-%D0%B7%D0%B0%D0%B4%D0%B0%D0%B2%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5-%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81%D1%8B)

<div style="page-break-after: always;"></div>

## 1. Введение

Приложение предназначено для работы с системами [Zima2](/documentation/RU/Zima/Zima2_DataBrief_ru.md): 
- конфигурирования устройств системы 
- обработки поступающей от них информации и передачи результатов по последовательному соединению и/или по UDP-соединению.

Основные настройки приложения задаются при помощи командной строки, управление может осуществлятся как при помощи ввода команд с консоли, так с удаленного терминала - по протоколу UDP.

Настоящий документ содержит список команд, для каждой из которых указано, каким путем она может быть передана в приложение:
- через командную строку
- через терминал
- через UDP-соединение

Регистр команд не имеет значения. При работе через консоль, после текста команды необходимо нажать 'Enter'.

Если приложение принимает команду, оно сообщает об этом при помощи эхо-ответа, например:

```
# cls
"CLS" OK
#
```

Если в написании команды или списке параметров была допущена ошибка, будет отображено соответствующее сообщение.

### 1.1. Поддерживаемые платформы

- Windows x64
- Linux x64
- Linux arm64
- Linux arm

[Репозиторий](https://github.com/ucnl/AzimuthConsole)  
[Полный список релизов](https://github.com/ucnl/AzimuthConsole/releases).

### 1.2. Горячие клавиши
Для удобства использования приложения поддерживаются следующие горячие клавиши для наиболее часто используемых команд:

| Сочетание клавиш | Действие |
| :--- | :--- |
| F1  | Отобразить поддерживаемые команды |
| F12 | Переключение режимов вывода данных в окно терминала: Только сообщения об ошибках, вывод отключен, вывод включен |
| Ctrl+N | **N**etwork: Открыть/Закрыть соединение (OCON/CCON) |
| Ctrl+I | **I**nterrogation: Приостановить/Возобновить опрос маяков-ответчиков |
| Ctrl+L | C**l**ear screen: очистить экран |
| Ctrl+E | **E**xit: Закрыть приложение |

### 1.3. Поддерживаемые устройства

- Пеленгационные антенны (USBL-трансиверы)
  - [Zima2B](/documentation/RU/Zima/Zima2B_Specification_ru.md)
  - [Zima2B-35](/documentation/RU/Zima/Zima2B35_Specification_ru.md)
  - [Zima2BK](/documentation/RU/Zima/Zima2BK_Specification_ru.md)
- Маяки-ответчики
  - [Zima2R](/documentation/RU/Zima/Zima2R_Specification_ru.md)
  - [Zima2R-35](/documentation/RU/Zima/Zima2R35_Specification_ru.md)
  - [Zima2RK](/documentation/RU/Zima/Zima2RK_Specification_ru.md) 
  - [Zima2uR](/documentation/RU/Zima/Zima2uR_Specification_ru.md)
- LBL-трансиверы
  - [Zima2L]()
  - [Zima2L-35]()
  - [Zima2LK]()
  - [Zima2uL]()


## 2. Команды управления

___

### 2.1. HELP
Вывод справки по поддерживаемым командам.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```help```

___

### 2.2. SETM
**SETM** - **SET** **M**ain parameters.  
Задание основных настроек приложения.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```setm,azmPort|auto,[azmBaudrate],[rctrl_in_ip_addr:port],[rctrl_out_ip_addr:port],[addr_mask],[salinity_PSU],[max_dist_m]```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | azmPort | Последовательный порт для подключения пеленгационной антенны Zima2-B и ее разновидностей. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 2 | azmBaudRate | Скорость последовательного порта для подключения пеленгационной антенны Zima2-B. Значение по умолчанию 9600. Рекомендуется оставить это поле пустым. |
| 3 | rctrl_in_ip_addr:port | IP-адрес и порт для приема управляющих команд по UPD-протоколу. Значение по умолчанию 255.255.255.255:28127. |
| 4 | rctrl_out_ip_addr:port | IP-адрес и порт для передачи ответов на управляющие команды по UPD-протоколу. Значение по умолчанию 255.255.255.255:28129. |
| 5 | addr_mask | Маска адресов для опроса маяков-ответчиков. Значение по умолчанию 1 - будет опрашиваться только маяк с адресом 1. |
| 6 | salinity_PSU | Соленость в PSU в диапазоне от 0.0 до 40.0. Значение по умолчанию 0.0. |
| 7 | max_dist_m | Максимальная дальность работы в диапазоне от 500 м до 5500 м. Это значение определяет максимальный интервал ожидания ответа маяка-ответчика. |

Пример:
```SETM,AUTO,,255.255.255.255:28127,255.255.255.255:28129,1,0,1000 ```

___

### 2.3. SETA
**SETA** - **SET** **A**uxilary sources parameters.  
Задание настроек дополнительных источников нацигационных данных AUX1 и AUX2.

Для определения абсолютных географических координат системе необходимо иметь географическое положение пеленгационной антенны и азимутальный угол. Географическое положение берется из сообщений **$G*RMC**, а азимутальный угол из сообщений **$\*\*HDT** или **$\*\*HDG** или **$\*\*HDM**.

Если используется GNSS-компас, являющийся источником как географического положения, так и азимутального угла, то необходимо указать только **AUX1**. Если испольуется GNSS-приемник и магнитный компас, или по какой-то причине географическое положение и азимутальный угол получаются из двух разных устройств, то в качестве источника географического положения необходимо указать **AUX1**, а в качестве источника азимутального угла - **AUX2**.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```seta,[aux1Port|auto],[aux1Baudrate],[aux2Port|auto],[aux2Baudrate]```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | aux1Port | Последовательный порт для подключения GNSS-компаса или GNSS-приемника. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 2 | aux1Baudrate | Скорость последовательного порта для подключения AUX1. Значение по умолчанию 9600. |
| 3 | aux2Port | Последовательный порт для подключения магнитного компаса или иного источника азимутального угла. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 4 | aux2Baudrate | Скорость последовательного порта для подключения AUX2. Значение по умолчанию 9600. |

Пример:
```SETA,AUTO,38400,,,```

___

### 2.4. SETO
**SETA** - **SET** **O**utput parameters.  
Задание настроек для выходных портов.

Приложение может передавать навигационные данные в последовательный порт или в UDP-порт.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```seto,[outPort],[outBaudrate],[out_ip_addr:port]```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | outPort | Последовательный порт для передачи в него вырабатываемой навигационной информации. Если поле пустое - последовательный порт для вывода не используется. |
| 2 | outBaudrate | Скорость последовательного порта. Значение по умолчанию 9600. |
| 3 | out_ip_addr:port | Параметры UDP-подключения для передачи вырабатываемой навигационной информации в формате адрес:порт. Если поле пустое, UDP-подключение не используется для передачи навигационной информации. |

Пример:
```SETO,COM4,115200,255.255.255.255:28128```

___

### 2.5. SARP
**SARP** - **S**et **A**ntenna **R**elative **P**osition.  
Задание положения пеленгационной антенны относительно точки топопривязки и угловой поправки между нулевым направлением пеленгационной антенны и компаса.
Ось Y - продольная ось судна от кормы к носу, Ось X - поперечная ось судна от левого борта к правому, Ось Z направлена вертикально вниз. 

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```sarp,x_offset_m,y_offset_m,angular_offset_deg```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | x_offset_m | Смещение пеленгационной антенны в метрах относительно точки топопривязки вдоль поперечной оси судна. |
| 2 | y_offset_m | Смещение пеленгационной антенны в метрах относительно точки топопривязки вдоль продольной оси судна. |
| 3 | angular_offset_deg | Угол между нулевым направлением компаса и гидроакустической пеленгационной антенны вокруг оси Z по часовой стрелке в диапазоне от 0 до 360°. |

Пример:
```SARP,0.7,2.1,0.5```

___

### 2.6. CLS
Очистка экрана.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```cls```

___

### 2.7. EXIT
Завершение работы приложения.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```exit```

___

### 2.8. OCON
**OCON** - **O**pen **CON**nections.  
Подключение устройств - открытие соединений. Аналог нажатия кнопки 'LINK' в приложении AzimuthSuite.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```OCON```

___

### 2.9. CCON
**CCON** - **C**lose **CON**nections.  
Закрытие всех соединений. Аналог нажатия кнопки 'LINK' в приложении AzimuthSuite.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```СCON```

___

### 2.10. CNA?
**CNA?** - Are **C**o**N**nections **A**ctive**?**.  
Запрос состяния соединений.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```CNA?```

Результат возвращается в виде:
```CNA,true|false```

- true - соединения активны
- false - соединения неактивны

___

### 2.11. ITG?
**ITG?** - Is **I**n**T**erro**G**ation active**?**.  
Запрос активности запроса маяков-ответчиков.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```ITG?```

Результат возвращается в виде:
```ITG,true|false```

- true - опрос маяков-ответчиков ведется
- false - опрос маяков-ответчиков не ведется

___

### 2.12. DET?
**DET?** - Is device **DET**ected **?**.  
Было ли детектировано устройство.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```DET?,deviceID```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | deviceID | Идентификатор устройства, может принимать значение из набора: AZM, AUX1, AUX2 |

Результат возвращается в виде:
```DET,deviceID,true|false```

- true - устройство подключено и опознано
- false - устройство не было опознано или неактивно

___

### 2.13. CREQ
**CREQ** - **C**ustom **REQ**uest.  
Запрос пользовательских данных.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```CREQ,rem_addr,data_id```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | rem_addr | Адрес маяка-ответчика в диапазоне от 1 до 16. |
| 2 | data_id | Идентификатор переменной в диапазоне от 3 до 30. |

Результат возвращается в виде:
```CREQR,rem_addr,data_id,result```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | rem_addr | Адрес маяка, который прислал пользовательское значение |
| 2 | data_id | Идентификатор переменной |
| 3 | result | Значение переменной |

___

### 2.14. LHO?
**LHO?** - Is **L**ocation and **H**eading **O**verride feature active**?**.  
Запрос статуса функции перегрузки географического положения и азимута.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```LHO?```

Результат возвращается в виде:
```LHO,true|false```
- true - функция активна
- false - функция неактивна

___

### 2.15. OFMT?
**OFMT?** - **O**utput data **F**or**M**a**T?**.  
Запрос формата выходных сообщений.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```OFMT?```

В результате выводятся форматы используемых выходных сообщений.

___

### 2.16. PITG
**PITG** - **P**ause **I**n**T**erro**G**ation.  
Приостановить запрос маяков-ответчиков.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```PITG```

___

### 2.17. RITG
**RITG** - **R**esume **I**n**T**erro**G**ation.  
Восстановить запрос маяков-ответчиков.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```RITG```

___

### 2.18. LHOV
**LHOV** - **L**ocation and **H**eading **OV**erride.  
Перегрузка географического положения и азимутального угла. Эта функция может использоваться для задачи вручную географического положения и азимутального угла если пеленгационная антенна статична и не меняет своей ориентации и положения в пространстве. 

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```LHOV,lat_deg,lon_deg,hdn_deg```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | lat_deg | Географическая широта в градусах в диапазоне от -90 до 90° |
| 2 | lon_deg | Географическая долгота в градусах в диапазоне от -180 до 180° |
| 3 | hdn_deg | Азимутальный угол в градусах в диапазоне от 0 до 360° |

___

### 2.19. SRC3
**SRC3** - **S**set **R**esponders **C**oordinates for 3 items.
Задание координат трех опорных маяков-ответчиков, используемых в качестве длинной навигационной базы. 
Команда используется в режиме длиннобазисной навигации (LBL), когда LBL-трансивер определяет свое местоположение по трем неподвижным относительно друг друга маякам-ответчикам. 

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```SRC3,mode,r1x,r1y,r2x,r2y,r3x,r3y```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | mode | 0 - очистить координаты маяков-ответчиков, 1 - декартова система координат |
| 2 | r1x | Координата X маяка-ответчика с адресом 1 |
| 3 | r1y | Координата Y маяка-ответчика с адресом 1 |
| 4 | r2x | Координата X маяка-ответчика с адресом 2 |
| 5 | r2y | Координата Y маяка-ответчика с адресом 2 |
| 6 | r2x | Координата X маяка-ответчика с адресом 3 |
| 7 | r2y | Координата Y маяка-ответчика с адресом 3 |

___

### 2.20. HKEYS
**HKEYS** - Get **H**ot **K**eys hint.
Получить подсказку по горячим клавишам.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```HKEYS```

___

### 2.21. PLAY
**PLAY** - **PLAY**back a log-file.
Воспроизведение файла журнала.

В процессе работы приложение записывает журнал информационного обмена с подключенным устройством системы Zima2, сохраняя при этом временные метки. Это позволяет в дальнейшем воспроизвести работу системы без необходимости подключения устройства. Если это предусмотрено настройками, то приложение будет передавать навигационные данные по заданным каналам (последовательный порт, UDP) так, как это было бы при работе с устройством на водоеме.

Эта функция может быть полезна для отладочных целей при сопряжении различного ПО с AzimuthConsole.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```PLAY,[mode],[logFileName]```

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | mode | Зарезервировано |
| 2 | logFileName | Путь к файлу журнала, который необходимо воспроизвести. Для досрочного завершения воспроизведения необходимо выполнить команду с пустым именем файла. |

___

### 2.22. RRA?
**RRA?** - **R**emote **R**esponder **A**ddress.
Запрос текущего значения адреса маяка-ответчика.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```RRA?```

Результат возвращается в виде:
```RRA,address```
address - текущее значение адреса маяка-ответчика

___

### 2.23. SRRA
**SRRA** - **S**et **R**emote **R**esponder **A**ddress.
Задание текущего значения адреса маяка-ответчика.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ❌ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```SRRA,address```

Результат возвращается в виде:
```RRA,address```
address - текущее значение адреса маяка-ответчика

| № | Наименование параметра  | Описание |
| :--- | :--- | :--- |
| 1 | address | Адрес маяка-ответчика. |

___

### 2.24. SIOC
**SIOC** - **S**et responder **I**ndividual **O**utput **C**hannel.
Задание параметров UDP-соединения для отдельного маяка-ответчика. 

Если заданы параметры индивидульного соединения для одного или нескольких маяков, приложение будет передавать по ним стандартные сообщения RMC, GGA и MTW (NMEA0183) с координатами (при наличии) соответствующих маяков-ответчиков.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ✔ |
| удаленный терминал (UDP) | ✔ |

Формат команды:
```SIOC,rem_addr,ip_addr:port```

___

### 2.25. FLTS
**FLTS** - **F**i**lt**ering **S**ettings.
Задание настроек фильтрации навигационных данных.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```FLTS,usbl_sf_fifo,usbl_sf_thld,usbl_df_fifo,usbl_df_mspeed,usbl_df_thld,lbl_rer_thld,lbl_sf_fifo,lbl_sf_thld,lbl_df_fifo,lbl_df_mspeed,lbl_df_thld```

| № | Наименование параметра  | Описание | Значение по умолчанию |
| :--- | :--- | :--- | :--- |
| 1 | usbl_sf_fifo | Режим USBL: Размер FIFO для сглаживающего фильтра | 4 |
| 2 | usbl_sf_thld | Режим USBL: Порог сброса сглаживающего фильтра, м | 100 |
| 3 | usbl_df_fifo | Режим USBL: Размер FIFO ACHOD-фильтра | 8 |
| 4 | usbl_df_mspeed | Режим USBL: максимально возможная скорость позиционируемого объекта, м/с | 1 |
| 5 | usbl_df_thld | Режим USBL: Пороговое расстояние (ACHOD-фильтр), м | 5 |
| 6 | lbl_rer_thld | Режим LBL: Пороговое значение радиальной ошибки, м | 10 |
| 7 | lbl_sf_fifo | Режим LBL: Размер FIFO для сглаживающего фильтра | 4 |
| 8 | lbl_sf_thld | Режим LBL: Порог сброса сглаживающего фильтра, м | 30 |
| 9 | lbl_df_fifo | Режим LBL: Размер FIFO ACHOD-фильтра | 8 |
| 10 | lbl_df_mspeed | Режим LBL: максимально возможная скорость позиционируемого объекта, м/с | 1 |
| 11 | lbl_df_thld | Режим LBL: Пороговое расстояние (ACHOD-фильтр), м | 5 |

- Если поля 7 и 8 пустые, в режиме LBL не используется сглаживающий фильтр.  
- Если поля 9, 10 и 11 пустые, в режиме LBL не используется ACHOD-фильтр.

___

### 2.25. FLTS
**SETS** - **S**e**T**tings **S**how.
Отобразить текущие настройки приложения.

Доступно:

| | | 
| :--- | :--- |
| командная строка | ✔ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```SETS```

___

## 3. Выходные данные

Актуальный формат выходных данных можно получить в приложении при помощи команды [2.15. OFMT?](#215-ofmt)

### 3.1. AZMLOC - локальные параметры
Сообщение передается ~1 раз в секунду, когда открыто соединение с пеленгационной антенной или LBL-трансивером.

Формат сообщения:
```@AZMLOC,stPressure_mBar,stDepth_m,waterTemp_C,stPitch_deg,stRoll_deg,age,lat_deg,lon_deg,course_deg,speed_mps,age,heading_deg,age,x_m,y_m,z_m,rerr_m,age,```

| № | Наименование параметра  | Тип | Единицы измерения | Диапазон значений | Описание | Источник |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | stPressure_mBar | f32 | мБар | 0 .. 30 | Внешнее давление | Встроенный сенсор |
| 2 | stDepth_m | f32 | м | 0 .. 300 | Глубина погружения устройства | Встроенный сенсор |
| 3 | waterTemp_C | f32 | °С | -4 .. 40 | Температура окружающей среды | Встроенный сенсор |
| 4 | stPitch_deg | f32 | ° | -180 .. 180 | Крен | Встроенный сенсор |
| 5 | stRoll_deg | f32 | ° | -180 .. 180 | Дифферент | Встроенный сенсор |
| 6 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Системные часы |
| 7 | lat_deg | f32 | ° | -90 .. 90 | Географическая широта | Внешний источник **AUX1** или значение, заданное командой [LHOV](#218-lhov) |
| 8 | lon_deg | f32 | ° | -180 .. 180 | Географическая долгота | Внешний источник **AUX1** или значение, заданное командой [LHOV](#218-lhov) |
| 9 | course_deg | f32 | ° | 0 .. 360 | Курс движения | Внешний источник **AUX1** |
| 10 | speed_mps | f32 | м/c | 0 .. | Скорость движения | Внешний источник **AUX1** |
| 11 | age | f32 | сек | 0 ..  | Возраст предыдущих значений | Системные часы |
| 12 | heading_deg | f32 | ° | 0 .. 360 | Азимутальный угол | Внешний источник **AUX1** или **AUX2** или значение, заданное командой [LHOV](#218-lhov) |
| 13 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 14 | x_m | f32 | м | | Вычисленное положение: координата X (Режим LBL) | Расчетное значение |
| 15 | y_m | f32 | м | | Вычисленное положение: координата Y (Режим LBL) | Расчетное значение |
| 16 | z_m | f32 | м | 0 .. 300 | Глубина погружения устройства (Значение аналогично значению поля №2) | Встроенный сенсор |
| 17 | rerr_m | f32 | м | | Радиальная ошибка определения положения (Режим LBL) | Расчетное значение |
| 18 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Системные часы |


### 3.2. AZMREM - данные маяка-ответчика
Сообщение передается отдельно для каждого из маяков при обновлении информации - получении ответа маяка или при возникновении таймаута.

Формат сообщения:
```@AZMREM,rem_addr,SRange_m,Azimuth_deg,PTime_s,MSR_dB,age,Depth_m,age,SRangeProjection_m,age,ADistance_m,age,AAzimuth_deg,age,Elevation_deg,age,VCC_V,age,WaterTemp_C,age,Lat_deg,Lon_deg,age,RAzimuth_deg,age,Message,age,X_m,Y_m,Z_m,IsTimeout```

| № | Наименование параметра  | Тип | Единицы измерения | Диапазон значений | Описание | Источник |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | rem_addr | u8 | - | 0 .. 15 | Адрес маяка-ответчика | - |
| 2 | SRange_m | f32 | м | 0 .. | Наклонная дальность между антенной и маяком. Допускаются отрицательные значения | Измерение |
| 3 | Azimuth_deg | f32 | ° | 0 .. 360 | Горизонтальный угол прихода сигнала маяка-ответчика относительно нулевого направления антенны | Измерение |
| 4 | PTime_s | f32 | сек | 0 .. | Время распространения сигнала от маяка до антенны. Допускаются отрицательные значения | Измерение |
| 5 | MSR_dB | f32 | дБ | 14 ..  | Качество приема сигнала маяка-ответчика. Величины менее 20 дБ означают плохие условия | Измерение |
| 6 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Cистемные часы |
| 7 | Depth_m | f32 | м | 0 .. 300/350/500/1000 | Глубина маяка-ответчика | Встроенный сенсор маяка-ответчика |
| 8 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 9 | SRangeProjection_m | f32 | м | 0 .. | Проекция наклонной дальности на поверхность | Расчетное значение |
| 10 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 11 | ADistance_m | f32 | м | 0 .. | Дальность от точки топопривязки до маяка-ответчика по поверхности воды | Расчетное значение |
| 12 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 13 | AAzimuth_deg | f32 | ° | 0 .. 360 | Абсолютный азимут на маяк-ответчик из точки топопривязки | Расчетное значение |
| 14 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 15 | Elevation_deg | f32 | ° | 0 .. 360 | Угол места маяка-ответчика | Расчетное значение |
| 16 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 17 | VCC_V | f32 | В | 4 .. 16 | Напряжение питания маяка-ответчика | Встроенный сенсор маяка-ответчика |
| 18 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 19 | WaterTemp_C | f32 | °С | -4 .. 46 | Температура окружающей среды | Встроенный сенсор маяка-ответчика |
| 20 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 21 | Lat_deg | f32 | ° | -90 .. 90 | Географическая широта маяка-ответчика | Расчетное значение |
| 22 | Lon_deg | f32 | ° | -180 .. 180 | Географическая долгота маяка-ответчика | Расчетное значение |
| 23 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Системные часы |
| 24 | RAzimuth_deg | f32 | ° | 0 .. 360 | Абсолютный азимут на станцию от маяка-ответчика | Расчетное значение |
| 25 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 26 | Message | string | - | - | Последнее сообщение от маяка-ответчика | - |
| 27 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 28 | X_m | f32 | м | - | Положение в локальной декартовой системе координат: координата X (Режим LBL) | Заданное пользователем |
| 29 | Y_m | f32 | м | - | Положение в локальной декартовой системе координат: координата Y (Режим LBL) | Заданное пользователем |
| 30 | Z_m | f32 | м | 0 .. 300/350/500/1000 | Глубина маяка-ответчика | Встроенный сенсор маяка-ответчика |
| 31 | IsTimeout | bool/string |  | true/false | Признак таймаута - превышения интервала ожидания ответа маяка-ответчика | - |

## 4. Вспомогательные утилиты

### 4.1. AzimuthUDPRemote - UDP-терминал
Демонстрационная утилита предназначена для быстрого ознакомления с возможностями удаленного управления приложением AzimuthConsole по протоколу UDP, если такая опция задействована (см. [2.2. SETM](#22-setm)).
После старта приложения, пользователь может вводить команды, которые будут переданы в AzimuthConsole, результаты выполнния будут отображаться в окне приложения.

По умолчанию приложение прослушивает порт 28129, а передает данные по адресу 255.255.255.255:28127. Для задания иных значений их необходимо задать в качестве параметров командной строки. формат командной строки следующий:

```AzimuthUDPRemote [in_port] [out_address:port]```

Т.к. все пользовательские команды передаются по UPD, для управления самим приложением предусмотрены две дополнительные команды:

- xcls - очистка экрана
- xexit - завершение приложения

### 4.2. AzimuthUDPListener - UDP-приемник
Демонстрационная утилита предназначена для быстрого ознакомления с функцией передачи выходных данных (см. [3. Выходные данные](#3-%D0%B2%D1%8B%D1%85%D0%BE%D0%B4%D0%BD%D1%8B%D0%B5-%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5)) по протоколу UDP.

По умолчанию приложение прослушивает порт 28128 и выводит полученные данные в окно консоли.
Для задания другого порта для получения данных от AzimuthConsole необходимо указать номер порта в качестве параметра командной строки при запуске приложения. Формат командной строки:

```AzimuthUDPListener [in_port]```

Для закрытия приложения необходимо нажать клавишу **Enter**.

## 5. Примеры
### 5.1. Командная строка
Стандартные настройки, вывод по UDP:

```AzimuthConsole SETM,AUTO,,255.255.255.255:28127,255.255.255.255:28129,1,0,1000 SETO,,,255.255.255.255:28128```

Стандартные настройки, подключение GNSS-компаса, передающего на скорости 38400 бод, вывод навигационных данных по UDP:

```AzimuthConsole SETM,AUTO,,255.255.255.255:28127,255.255.255.255:28129,1,0,1000 SETA,AUTO,38400,, SETO,,,255.255.255.255:28128```

### 5.2. Часто используемые команды
Задание географического положения и ориентации антенны вручную:

```LHOV,44.123456,48.123456,17.5```

Широта: 44.123456°
Долгота: 48.123456°
Азимут нуля антенны: 17.5°

## 6. Часто задаваемые вопросы

**Q**: Может ли работать вывод данных одновременно и в последовательный порт и по UDP?
> **A**: Да, это один из возможных вариантов.



Вы можете задать вопросы нам на [support@unavlab.com](mailto:support@unavlab.com) и мы поместим их сюда вместе с ответами.


<div style="page-break-after: always;"></div>

[К содержанию](#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5)

<div style="page-break-after: always;"></div>
