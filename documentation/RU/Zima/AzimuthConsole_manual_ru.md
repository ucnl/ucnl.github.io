[Главная](/README_RU) ❯ [Гидроакустические навигационные и трекинговые системы](/navigation_and_tracking_systems_ru) ❯ **AzimuthConsole: Руководство пользователя**

<div style="page-break-after: always;"></div>

| ![logo](/documentation/sm_logo.png) |  |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | **AzimuthConsole** - Кросплатформенное приложение для работы с системой Zima2 USBL <br/> Руководство пользователя |

# AzimuthConsole <br/> Руководство пользователя

<div style="page-break-after: always;"></div>

## Содержание


<div style="page-break-after: always;"></div>

## 1. Введение

## 2. Команды управления

## 2.1. HELP
Вывод справки по поддерживаемым командам.

Доступно:
| | | 
| :--- | :--- |
| командная строка | ✅ |
| терминал | ✅ |
| удаленный терминал (UDP) | ✅❌ |

Формат команды:
```help```

## 2.2. SETM
Задание основных настроек приложения.

Доступно:
| | | 
| :--- | :--- |
| командная строка | ✅ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```setm,azmPort|auto,[azmBaudrate],[rctrl_in_ip_addr:port],[rctrl_out_ip_addr:port],[addr_mask],[salinity_PSU],[max_dist_m]```

| № | Наименование парамера  | Описание |
| :--- | :--- | :--- |
| 1 | azmPort | Последовательный порт для подключения пеленгационной антенны Zima2-B и ее разновидностей. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 2 | azmBaudRate | Скорость последовательного порта для подключения пеленгационной антенны Zima2-B. Значение по умолчанию 9600. Рекомендуется оставить это поле пустым. |
| 3 | rctrl_in_ip_addr:port | IP-адресс и порт для приема управляющих команд по UPD-протоколу. Значение по умолчанию 255.255.255.255:28127. |
| 4 | rctrl_out_ip_addr:port | IP-адресс и порт для передачи ответов на управляющие команды по UPD-протоколу. Значение по умолчанию 255.255.255.255:28129. |
| 5 | addr_mask | Маска адресов для опроса маяков-ответчиков. Значение по умолчанию 1 - будет опрашиваться только маяк с адресом 1. |
| 6 | salinity_PSU | Соленость в PSU в диапазоне от 0.0 до 40.0. Значение по умолчанию 0.0. |
| 7 | max_dist_m | Максимальная дальность работы в диапазоне от 500 м до 5500 м. Это значение определяет максимальный интервал ожидания ответа маяка-ответчика. |

Пример:
```SETM,AUTO,,255.255.255.255:28127,255.255.255.255:28129,1,0,1000 ```

### 2.3. SETA
Задание настроек дополнительных источников нацигационных данных AUX1 и AUX2.

Для определения абсолютных географических координат системе необходимо иметь географическое положение пеленгационной антенны и азимутальный угол. Географическое положение берется из сообщений **$G*RMC**, а азимутальный угол из сообщений **$\*\*HDT** или **$\*\*HDG** или **$\*\*HDM**.

Если используется GNSS-компас, являющийся источником как географического положения, так и азимутального угла, то необходимо указать только AUX1. Если испольуется GNSS-приемник и магнитный компас, или по какой-то причине географическое положение и азимутальный угол получаются из двух разных устройств, то в качестве источника географического положения необходимо указать AUX1, а в качестве источника азимутального угла - AUX2.

Доступно:
| | | 
| :--- | :--- |
| командная строка | ✅ |
| терминал | ❌ |
| удаленный терминал (UDP) | ❌ |

Формат команды:
```seta,[aux1Port|auto],[aux1Baudrate],[aux2Port|auto],[aux2Baudrate]```

| № | Наименование парамера  | Описание |
| :--- | :--- | :--- |
| 1 | aux1Port | Последовательный порт для подключения GNSS-компаса или GNSS-приемника. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 2 | aux1Baudrate | Скорость последовательного порта для подключения AUX1. Значение по умолчанию 9600. |
| 3 | aux2Port | Последовательный порт для подключения магнитного компаса или иного источника азимутального угла. Если порт заранее неизвестен, рекомендуется указать "auto". |
| 4 | aux2Baudrate | Скорость последовательного порта для подключения AUX2. Значение по умолчанию 9600. |

Пример:
```SETA,AUTO,38400,,,```


## 3. Выходные данные

### 3.1. AZMLOC - локальные параметры

Сообщение передается ~1 раз в секунду, когда открыто соединение с пеленгационной антенной.

Формат сообщения:
```@AZMLOC,stPressure_mBar,stDepth_m,waterTemp_C,stPitch_deg,stRoll_deg,age,lat_deg,lon_deg,course_deg,speed_mps,age,heading_deg,age,```

| № | Наименование парамера  | Тип | Единицы измерения | Диапазон значений | Описание | Источник |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | stPressure_mBar | f32 | мБар | 0 .. 30 | Внешнее давление | Встроенный сенсор |
| 2 | stDepth_m | f32 | м | 0 .. 300 | Глубина погружения устройства | Встроенный сенсор |
| 3 | waterTemp_C | f32 | °С | -4 .. 40 | Температура окружающей среды | Встроенный сенсор |
| 4 | stPitch_deg | f32 | ° | -180 .. 180 | Крен | Встроенный сенсор |
| 5 | stRoll_deg | f32 | ° | -180 .. 180 | Дифферент | Встроенный сенсор |
| 6 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Системные часы |
| 7 | lat_deg | f32 | ° | -90 .. 90 | Географическая широта | Внешний источник AUX1 или значение, заданное командой [LHOV]() |
| 8 | lon_deg | f32 | ° | -180 .. 180 | Географическая долгота | Внешний источник AUX1 или значение, заданное командой [LHOV]() |
| 9 | course_deg | f32 | ° | 0 .. 360 | Курс движения | Внешний источник AUX1 |
| 10 | speed_mps | f32 | м/c | 0 .. | Скорость движения | Внешний источник AUX1 |
| 11 | age | f32 | сек | 0 ..  | Возраст предыдущих значений | Системные часы |
| 12 | heading_deg | f32 | ° | 0 .. 360 | Азимутальный угол | Внешний источник AUX1 или AUX2 или значение, заданное командой [LHOV]() |
| 13 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |


### 3.2. AZMREM - данные маяка-ответчика

Сообщение передается отдельно для каждого из маяков при обновлении информации - получении ответа маяка или при возникновении таймаута.

Формат сообщения:
```@AZMREM,rem_addr,SRange_m,Azimuth_deg,PTime_s,MSR_dB,age,Depth_m,age,SRangeProjection_m,age,ADistance_m,age,AAzimuth_deg,age,Elevation_deg,age,VCC_V,age,WaterTemp_C,age,Lat_deg,Lon_deg,age,RAzimuth_deg,age,Message,age,IsTimeout```


Message,age,IsTimeout

| № | Наименование парамера  | Тип | Единицы измерения | Диапазон значений | Описание | Источник |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | rem_addr | u8 | - | 1 .. 16 | Адрес маяка-ответчика | - |
| 2 | SRange_m | f32 | м | 0 .. | Наклонная дальность между антенной и маяком. Допускаются отрицательные значения | Измерение |
| 3 | Azimuth_deg | f32 | ° | 0 .. 360 | Горизонтальный угол прихода сигнала маяка-ответчика относительно нулевого направления антенны | Измерение |
| 4 | PTime_s | f32 | сек | 0 .. | Время распространения сигнала от маяка до антенны. Допускаются отрицательные значения | Измерение |
| 5 | MSR_dB | f32 | дБ | 14 ..  | Качество приема сигнала маяка-ответчика. Величины менее 20 дБ означают плохие условия | Измерение |
| 6 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Cистемные часы |
| 7 | Depth_m | f32 | м | 0 .. 300/350/500/1000 | Глубина маяка-ответчика | Встроенный сенсор маяка-ответчика |
| 9 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 10 | SRangeProjection_m | f32 | м | 0 .. | Проекция наклонной дальности на поверхность | Расчетное значение |
| 11 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 12 | ADistance_m | f32 | м | 0 .. | Дальность от точки топопривязки до маяка-ответчика по поверхности воды | Расчетное значение |
| 13 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 14 | AAzimuth_deg | f32 | ° | 0 .. 360 | Абсолютный азимут на маяк ответчик из точки топопривязки | Расчетное значение |
| 15 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 16 | Elevation_deg | f32 | ° | 0 .. 360 | Угол места маяка-ответчика | Расчетное значение |
| 17 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 18 | VCC_V | f32 | В | 4 .. 16 | Напряжение питания маяка-ответчика | Встроенный сенсор маяка-ответчика |
| 19 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 20 | WaterTemp_C | f32 | °С | -4 .. 46 | Температура окружающей среды | Встроенный сенсор маяка-ответчика |
| 21 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 22 | Lat_deg | f32 | ° | -90 .. 90 | Географическая широта маяка-ответчика | Расчетное значение |
| 23 | Lon_deg | f32 | ° | -180 .. 180 | Географическая долгота маяка-ответчика | Расчетное значение |
| 24 | age | f32 | сек | 0 .. | Возраст предыдущих значений | Системные часы |
| 25 | RAzimuth_deg | f32 | ° | 0 .. 360 | Абсолютный азимут на станцию от маяка-ответчика | Расчетное значение |
| 26 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 27 | Message | string | - | - | Последнее сообщение от маяка-ответчика | - |
| 28 | age | f32 | сек | 0 .. | Возраст предыдущего значения | Системные часы |
| 29 | IsTimeout | bool/string |  | true/false | Признак таймаута - превышения интервала ожидания ответа маяка-ответчика | - |

<div style="page-break-after: always;"></div>
