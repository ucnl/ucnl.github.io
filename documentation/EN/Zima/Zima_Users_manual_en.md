| ![logo](https://ucnl.github.io/documentation/sm_logo.png) |  |
| :---: | ---: |
| [www.unavlab.com](https://www.unavlab.com/) <br/> [support@unavlab.com](mailto:support@unavlab.com) | **Zima USBL** - underwater acoustic tracking system <br/> User's manual |


# THIS DOCUMENT IS UNDER CONSTRUCTION

# Zima USBL <br/> User's manual

<div style="page-break-after: always;"></div>

## Contents

    
<div style="page-break-after: always;"></div>

## 1. Introduction
Underwater acoustic navigation and tracking system **Zima** is designed to determine in real-time the horizontal angle and distance
to underwater objects equipped with responder-beacons [Zima-R](Zima_R_Specification_en.md). Responder-beacons
 can be installed on remote-operated underwater vehicles (ROVs), inhabited underwater vehicles, autonomous
unmanned underwater vehicles (AUVs) as well as for divers and technical divers (in case of using an autonomous version of the responder-beacons).

Navigation system **Zima** is an ultra-short baseline navigation system (_USBL_), the principle of which is based
using a phased array antenna to determine the horizontal angle of arrival of the signal and determine the distance to the beacons using the "request-response" method.
A distinctive feature of this system is the so-called "two-way" navigation, a patented solution that allows mutually
determine the distance both at the base station and at responder-beacons, and also transmit to beacons the azimuth angle to the base station.
The system also allows transmitting telecontrol commands to beacons and receiving telemetry data from beacons.

<div style="page-break-after: always;"></div>

## 2. Composition of the system
### 2.1. Zima-B: Hydroacoustic direction-finding base station
#### 2.1.1. General information
Hydroacoustic direction-finding station [Zima-B](Zima_B_Specification_en.md) (hereinafter referred to as the base station) is designed to transmit control acoustic signals to beacons, determine the propagation time of the signal to the beacons, determine the horizontal angle of arrival of the response signals of the beacons, transmit telecommands and receive telemetry information from beacons through specialized acoustic signals.

| ![Zima-B](https://ucnl.github.io/documentation/def_zima_b_ant.png) |
| :---: |
| **Figure 1 - Base station [Zima-B](Zima_B_Specification_en.md)** | 
| _Main view_ |

The base station is designed as a maintenance-free candy bar on a cable, embedded in a high-strength polyurethane compound. The station has a phased array antenna, a transmitting antenna, and an integrated depth/temperature sensor. As an additional option, the base station is equipped with a system for determining the course and position. In the general case, the base station is mounted on a rigid vertical rod taking into account the directivity of the antenna - the determined arrival angles are transmitted in the antenna coordinate system.  

| ![Zima-B placement](https://ucnl.github.io/documentation/zima_boat_placement.png) |
| :---: |
| **Figure 2 - [Zima-B](Zima_B_Specification_en.md) Deployment scheme** |
| _1-rod, 2-boat, 3-water surface, 4-cable, 5-[Zima-B](Zima_B_Specification_en.md), 6-zero direction_ |

Figure 3 shows the outline drawing of the base station [Zima-B](Zima_B_Specification_en.md).
The base station has an input cable for energy and information pairing and an opening for the pressure/temperature sensor. Structurally, the base station is divided into the following parts: cable entry (in the upper part of the station) and a fixing groove for fixing the station with a clamp. Below is the cylindrical surface of the transmitting piezoelectric element, under which there is a receiving phased antenna array. The surface of the transmitting element and the receiving grille during installation should not be blocked or shielded.
For proper operation of the station, line-of-sight is required between the working surfaces of the station and the antenna of the responder-beacon.

| ![Zima-B drawings](https://ucnl.github.io/documentation/Zima_B_drawings.png) |
| :---: |
| **Figure 3 - [Zima-B](Zima_B_Specification_en.md)** |
|  _Outine drawing_ |

In the standard configuration, [Zima-B](Zima_B_Specification_en.md) is supplied with a UART <-> RS-422 interface converter and cable
10 meters long, which is connected to the power supply and switching unit [Bat & Link Box](Bat_n_link_box_Specification_en.md). Thus,
through the switching unit, the station is connected to the control PC via the USB interface (serial port).

#### 2.1.2. Technical specifications

| PARAMETER | VALUE |
| :--- | :--- |
| DIMENSIONS (Ф х h) | 64 х 128 mm |
| WEIGHT<sup>[1](#footnote2122)</sup> (dry) | 0.44 kg |
| DEPTH RATING | 300 m |
| MAX. OPERATING RANGE<sup>[2](#footnote2121)</sup> |	3000 m |
| ACOUSIC SOURCE LEVEL |	170 dB re 1 μPa @ 1 m |
| NOMINAL DEPTH ACCURACY | 0.1 m |
| HORIZONTAL ANGLE OF ARRIVAL ESTIMATION ACCURACY (typ.)<sup>[3](#footnote2123)</sup> | 1° |
| NOMINAL DISTANCE ESTIMATION ACCURACY | 0.3 m |
| MAX. TILT COMPENSATED BY THE BUILT-IN INCLINOMETER RELATED TO VERTICAL AXIS (pitch/roll) | +/- 30° |
| WORKING VERTICAL ANGLES (RELATIVE TO HORIZONTAL PLANE)<sup>[3](#footnote2123)</sup> | +/-30° |
| BANDWIDTH | 6 .. 18 kHz |
| BUILT-IN TEMPERATURE SENSOR ACCURACY | 0.1°С |
| BIT ERROR RATE | 10<sup>-6</sup> |
| SNR<sup>[3](#footnote2123)</sup> | -3 dB |
| MAX. RELATIVE VELOCITY | +/- 2 m/s |
| RATED STARTUP TIME | 100 msec |
| WORKING TEMPERATURE RANGE | -5 .. 50 °C |
| BATTERY LIFE<sup>[4](#footnote2124)</sup> (WHEN SUPPLIED FROM [BAT&LINK BOX](Bat_n_link_box_Specification_en.md)) | 8 hours |
| INTERFACE | USB(COM) 9600 bit/s |
| PROTOCOL | NMEA 0183 [PZMA](Zima_Protocol_Specification_en.md) |
| CABLE LENGTH<sup>[5](#footnote2125)</sup> | 10 m |
| SUBSCRIBER DIVISION SCHEME (commands/subscribers) | 32/23 |
  
________________
<a name="footnote2121"><sup>2</sup></a> Withoud cable and interface converter.
<a name="footnote2122"><sup>1</sup></a> A parameter that determines the maximum range at which a signal can be received, based on electro-acoustic parameters of the transmitter and receiver, spatial decrease in the intensity of sound energy, attenuation in the medium and the acoustic noise level.    
<a name="footnote2123"><sup>3</sup></a> Obtained under laboratory conditions in a static test.  
<a name="footnote2124"><sup>4</sup></a> Considering 1 request in 3 seconds.  
<a name="footnote2125"><sup>5</sup></a> With additional cable and interface converter [Bat&Link Box](Bat_n_link_box_Specification_en.md). Can be increased by a request up to 20 m.  

#### 2.1.3 Storage and maintenance
There are no special storage and maintenance requirements for the base station, with the exception of the following:
- When used in salt and/or heavily polluted water, desalination is necessary (flushing in freshwater)
- The use of any organic solvents, strong acids, alkalis and other aggressive substances is not allowed
- If necessary, washing in household soap solutions is possible, avoiding liquid getting on the connector
- Impact or significant static loads are not allowed.
- Strong (with a radius of less than 5 cm) cable bending is not allowed.

### 2.2. Zima-R: responder-beacon
#### 2.2.1. General information
The responder-beacon is designed as a maintenance-free monoblock on a cable, embedded in a high-strength polyurethane compound. The appearance of the responder beacon [Zima-R] (Zima_R_Specification_en.md) is shown in Figure 4. Structurally, the beacon contains a cable entry, a mounting groove, a pressure sensor hole and a working surface. The pressure sensor opening and working surfaces (cylinder and cylinder end opposite the cable entry) must not be blocked or shielded. For correct operation of acoustic communication, line-of-sight between the base station and the responder-beacon is required.

| ![Zima-R](https://ucnl.github.io/documentation/zima_r.png) |
| :---: |
| **Figure 4 - [Zima-R](Zima_R_Specification_en.md)** |
|  _General view (autonomous version)_ |

#### 2.2.2. Technical specifications

| PARAMETER | VALUE |
| :--- | :--- |
| DIMENSIONS (Ф х h) | 64 x 62 mm |
| WEIGHT<sup>[1](#footnote2221)</sup> (dry) | 0.3 kg |
| DEPTH RATING | 300 m |
| NOMINAL DEPTH ACCURACY | 0.1 m |
| MAX. OPERATING RANGE<sup>[2](#footnote2222)</sup> |	3000 m |
| ACOUSIC SOURCE LEVEL |	170 dB re 1 μPa @ 1 m |
| BANDWIDTH | 6 .. 18 kHz |
| BUILT-IN TEMPERATURE SENSOR ACCURACY | 0.1°С |
| BIT ERROR RATE | 10<sup>-6</sup> |
| SNR<sup>[3](#footnote2223)</sup> | -3 dB |
| MAX. RELATIVE VELOCITY | +/- 2 m/s |
| RATED STARTUP TIME | 100 msec |
| SUPPLY VOLTAGE | 12 V |
| DATA LINES VOLTAGE | 0 .. 3.3 V |
| WORKING TEMPERATURE RANGE | -5 .. 50 °C |
| INTERFACE | USB(COM) 9600 bit/s |
| PROTOCOL | NMEA 0183 [PZMA](Zima_Protocol_Specification_en.md) |
| CABLE LENGTH<sup>[4](#footnote2224)</sup> | 1 m |
| SUBSCRIBER DIVISION SCHEME (commands/subscribers) | 32/23 |
| HORIZONTAL ANGLE OF ARRIVAL ESTIMATION ACCURACY (typ.)<sup>[3](#footnote2223)</sup> | 1° |
| NOMINAL DISTANCE ESTIMATION ACCURACY<sup>[3](#footnote2223)</sup> | 0.3 m |

##### Additional parameters of standard battery pack<sup>[5](#footnote2225)</sup>

| PARAMETER | VALUE |
| :--- | :--- |
| BUIT-IN BATTERY TYPE | Ni-MH |
| ELECTRICAL CAPACITY | 2.9 A\*h |
| NOMINAL VOLTAGE | 12 V |
| NUMBER OF BATTERIES | 10 pcs. |
| CANISTER MATERIAL | Delrin |
| WORKING TEMPERATURE RANGE | -5 .. 50 °С |

  
________________
<a name="footnote2221"><sup>2</sup></a> Without a battery pack. Standard battery pack ф50х165 mm, 0.58 kg, 2.9 A\*h 12 V. Operating time from a standard battery pack in standby mode - up to 70 hours, with radiation 1 time in 3 seconds up to 8 hours.  
<a name="footnote2222"><sup>1</sup></a> Without the presence of a multipath effect. A parameter that determines the maximum range at which a signal can be received, based on electro-acoustic parameters of the transmitter and receiver, spatial decrease in the intensity of sound energy, attenuation in the medium and the acoustic noise level.   
Battery life with standard battery pack - up to 70 hours in receiving mode, up to 8 hours with 1 request in 3 seconds schedule.  
<a name="footnote2223"><sup>3</sup></a> Obtained under laboratory conditions in a static test.  
<a name="footnote2224"><sup>4</sup></a> Can be changed by a special request.  
<a name="footnote2225"><sup>5</sup></a> Standard delivery set, subject to change without notice  

#### 2.2.3. Configuration options
The responder-beacon [Zima-R](Zima_R_Specification_ru.md) is a transceiver for underwater acoustic digital broadband communication and can be interfaced with the control system energetically and informationally. In this case, it is possible, if the control system has a magnetic compass, to determine the distance and heading angle to the base station, as well as receive telecontrol code commands from the base station.
When autonomous, the beacon is equipped with a battery canister, as shown in Figure 4. In this case, it is completely autonomous and does not require pairing with the carrier underwater vessel.
In [OEM](Zima_R_OEM_Specification_en.md) the beacon is delivered as a set of electronic boards for user installation in own normobaric housing. The responder-beacon is equipped with a deep-sea underwater acoustic antenna. Insertion of the antenna cable into the pressure-sensitive housing and switching with the beacon electronics, in this case, is provided by the user.

#### 2.2.4. Работа с устройством (автономное исполнение)
В случае автономного исполнения маяк является полностью автономным. Для работы он должен фиксироваться на носителе таким образом, чтобы рабочие поверхности моноблока (цилиндрическая поверхность и торец) не перекрывались элементами крепежа (для крепления должен использоваться специальный паз) и не экранировались различными элементами конструкции носителя. Для включения маяка-ответчика требуется подключить его к батарейному блоку при помощи разъема, как показано на рисунке 5.

| ![Zima-R](https://ucnl.github.io/documentation/zima_r_bat_conn.png) |
| :---: |
| **Рисунок 5 - подключение маяка-ответчика к батарейному блоку** |

В данном исполнении маяк комплектуется никель-металлгидридной сборной батареей из 10 элементов. 
Нормобарический корпус (канистра) имеет крышку с двойным уплотнением и четырехзаходной резьбой, которая позволяет закрывать крышку канистры за 3/4 оборота. Перед погружением в воду необходимо убедиться, что крышка канистры плотно закручена (от руки).
После подключения разъема маяка к батарейному блоку в течении первых десяти секунд устройство производит калибровку атмосферного давления, поэтому не допускается в течении первых десяти секунд с момента включения прибора прикладывать к нему какое-либо (отрицательное или положительное) давление, отличное от атмосферного - это приведет к некорректному измерению глубины маяком-ответчиком.
При автономном исполнении Tx и Rx жилы кабеля маяка замкнуты (см. рисунок 6). Это приводит к автоматическому отключению модуля UART в целях энергосбережения.

| ![Zima-R](https://ucnl.github.io/documentation/zima_r_drawings.png) |
| :---: |
| **Рисунок 6 - [Zima-R](Zima_R_Specification_ru.md)** |
| _габаритный чертеж_ |

#### 2.2.5. Работа с устройством (интегрируемое исполнение)
При энергетическом и информационном сопряжении с носителем, маяк передает на носитель дистанцию до базовой станции и азимут на маяк (только при подключенном к базовой станции магнитном компасе). Кроме того, в этом случае базовая станция может передать до 28 кодовых команд, о чем маяк-ответчик оповещает носитель в соответствие с [протоколом сопряжения](Zima_Protocol_Specification_ru.md).

#### 2.2.6. Хранение и обслуживание
Маяк-ответчик не требует каких-либо специальных процедур обслуживания, за исключением опреснения и промывки в проточной пресной воде, после использования в соленой и/или загрязненной воде.
При этом не допускается применение каких-либо смазочных материалов или растворителей, агрессивных моющих средств и тп. для удалении загрязнений с маяка-ответчика и его кабеля.

В случае использования маяка в автономном исполнении предъявляются дополнительные требования и назначаются мероприятия по обслуживанию батарейного блока и канистры. В частности:
- не допускается длительное (более суток) хранение батарейного блока в подключенном к маяку состоянии;
- не рекомендуется длительное хранение батарейного блока без плановой подзарядки (1 раз в месяц);
- уплотнительные кольца и резьба батарейной канистры при наличии загрязнений должны очищаться при помощи воды, мягкой кисти и мыльного раствора с последующей промывкой в проточной пресной воде и смазкой уплотнительных колец силиконовой смазкой;
- хранение канистры производится с закрытой крышкой;
- при использовании устройства в соленой и/или загрязненной воде по окончании работ требуется произвести его опреснение в проточной пресной воде.

<div style="page-break-after: always;"></div>

## 3. Пультовое ПО ZHost

### 3.1. Системные требования
Специализированное ПО [ZHost](https://github.com/ucnl/ZHost) (далее ПО) работает под управлением операционной системы MS Windows версий 7, 8 и 10. Рекомендуется монитор разрешением не менее 1024х768 пикселей и наличие мыши или тачпада.
ПО является портируемым (Portable), распространяется в виде [zip-архива \(Скачать последнюю версию \)](https://api.github.com/repos/ucnl/ZHost/zipball) и не требует какой-либо установки, кроме распаковки на ПК пользователя. 

Исполняемый файл ZHost.exe, файл настроек ZHost.settings и требуемые библиотеки располагаются в корневом каталоге приложения. Ресурсы локализации располагаются в подкаталогах, соответствующих языку локализации (напр. \ru, \ru-RU и т.п.).
При работе приложение ведет файлы журналов. Журналы хранятся в подкаталоге \LOG, который содержит подкаталоги с именем текущей даты (например, \LOG\2020-01-21), в которых содержатся .log-файлы с именами, соответствующими времени создания файла (ЧЧ-ММ-СС). Новый файл журнала создается каждый раз при старте приложения. Файлы журналов имеют текстовый формат и содержат весь информационный обмен пультового ПО с подключенными к нему устройствами, а также все возникающие в процессе работы ПО ошибки.

При включенной функции АВТОСКРИНШОТ, снимки окна приложения сохраняются в католог \SNAPSHOTS, который также содержит подкаталоги по имени даты создания, файлы снимков окна именуются по текущему времени (ЧЧ-ММ-СС) и имеют формат PNG (Portable Network Graphics).

> Поскольку коммутация с базовой станцией осуществляется посредством преобразователей интерфейса UART/RS-232/RS-422 в USB, то могут 
> потребоваться дополнительные драйверы для конкретного преобразователя.

### 3.2. Описание интерфейса ПО ZHost
Общий вид окна приложения показан на рисунке 7. Оно состоит из панели инструментов (меню), расположенной в верхней части окна, панели статуса, расположенной в нижней части окна; слева располагается экран отображения относительного положения маяков-ответчиков (ПЛАН), а справа древовидная структура, содержащая свойства используемых маяков (МАЯКИ).  
Панель инструментов состоит из верхней (СОЕДНИЕНИЕ, СТАНЦИЯ и т.п.) и нижней (АВТОЗАПРОС, АВТОСКРИНШОТ) субпанелей.

| ![ZHost main window view](https://ucnl.github.io/documentation/zhost_screen_gnss_hdg.png) |
| :---: |
| **Рисунок 7 - Пультовое ПО [ZHost](https://github.com/ucnl/ZHost)** |
| _вид главного окна в процессе работы_ |

#### 3.2.1 Панель инструментов

##### 3.2.1.1 Пункт СОЕДИНЕНИЕ
Пункт меню **"СОЕДИНЕНИЕ"** служит для открытия и закрытия соединения по настроенным последовательным портам. К ним относится порт, через 
который происходит информационный обмен с базовой станцией, порты AUX, по которым в ПО могут поступать (при соответствующих настройках) навигационные данные от GNSS + GNSS компас или GNSS + магнитный компас, а также порт эмуляции GNSS для одного из маяков-ответчиков.

При нажатии на пункт меню **"СОЕДИНЕНИЕ"** приложение пытается открыть соединения по последовательным портам согласно заданным настройкам.
Если не указаны дополнительные поставщики навигационных данных (GNSS, компас) и система работает в относительных координатах, то будет произведена попытка открыть порт для связи с базовой станцией. Если в настройках включены один или оба порта AUX и выходной порт эмуляции GNSS, то ПО произведет попытку открыть и их.

При удачном открытии портов, пункт меню **"СОЕДИНЕНИЕ"** становится выделенным, и последующее нажатие на него закроет соединения.

##### 3.2.1.2 Пункт СТАНЦИЯ
Пункт меню **"СТАНЦИЯ"** становится активным только после того, как открыто соединение с базовой станцией и от нее успешно получена информация об устройстве. Пункт содержит подпункты:
- **"ИНФОРМАЦИЯ"** для вызова диалогового окна, содержащего информацию о подключенной базовой станции (серийный номер устройства, версия прошивки и т.п.). 
- **"КАЛИБРОВКА ГЛУБИНЫ"** для вызова диалогового окна задания фактической глубины базовой станции. 

##### 3.2.1.2 Пункт МАЯК
Данный пункт меню становится активным только после того, как открыто соединение с базовой станцией и от нее успешно получена информация об устройстве, и при этом не активна функция **"АВТОЗАПРОС"**. Пункт содержит следующие подпункты:
- **"ПОСЛАТЬ КОМАНДУ"** для вызова диалогового окна отправки удаленной команды, в котором пользователь может выбрать адрес маяка-ответчика, которому необходимо отправить пользовательскую команду и идентификатор команды.
- **"СМЕНИТЬ АДРЕС"** для вызова диалогового окна смены адреса удаленного маяка-ответчика. В диалоговом окне необходимо указать текущий адрес маяка, которому необходимо изменить адрес и новый адрес. *Стоит быть осторожным при использовании данной функции. Она предназначена только для настройки адресов маяков до погружения.*
- **"КАЛИБРОВКА АТМОСФЕРНОГО ДАВЛЕНИЯ"** для вызова диалогового окна калибровки атмосферного давления. В диалоговом окне необходимо указать адрес маяка. При получении команды на калибровку атмосферного давления, маяк-ответчик примет текущие показания давления по встроенному сенсору за атмосферное. *Стоит быть осторожным при использовании давнной функции. Она предназначена только для настройки маяков до погружения.*

##### 3.2.1.3 Пункт ЖУРНАЛ
Пункт меню **"ЖУРНАЛ"** содержит функции для работы с файлами журналов приложения и содержит следующие подпункты:
- **"ПРОСМОТР"**. При выборе данного подпункта будет открыт текущий файл журнала приложения.
- **"АНАЛИЗИРОВАТЬ"**. При выборе данного подпункта будет отображен диалог выбора файла для анализа. Функция анализа файла журнала позволяет быстро восстановить ход работы системы, например, для того, чтобы восстановить треки судна и/или маяков-ответчиков в случае его утери.
- **"АНАЛИЗИРОВАТЬ ТЕКУЩИЙ"**. Действие данной функции аналогично действию функции **"АНАЛИЗИРОВАТЬ"**, с тем отличием, что в качетстве анализируемого файла журнала будет выбран текущий.
- **"ПЕРЕЗАПУСТИТЬ ТЕКУЩИЙ"**. При задействовании данного подпункта, содержимое текущего файла журнала будет удалено и будет продолжена запись журнала.
- **"УДАЛИТЬ ВСЕ ЖУРНАЛЫ"**. Данный подпункт меню предназначен для удаления все журналов приложения из каталога LOG\. *Внимание! Данные из файлов журналов будут утрачены безвозвратно!*

##### 3.2.1.4 Пункт ТРЕК
Пункт меню **"ТРЕК"** содержит функции для работы с треками, формируемыми ПО и содержит подпункты:
- **"СОХРАНИТЬ КАК..."** служит для вызова диалогового окна выбора имени и формата файла, для сохранения треков. Функция становится активна только при наличии в системе несохраненных географических данных. ПО поддерживает экспорт треков в форматы Keyhole Markup Language (KML) и Comma-separated values (CSV). 
- **"ОЧИСТИТЬ"**. Данный подпункт служит для удаления всех географических данных, накопленных ПО за текущую сессию. *Данную функцию стоит применять с осторожностью!*

##### 3.2.1.5 Пункт НАСТРОЙКИ
Пункт меню **"НАСТРОЙКИ"** активен только при закрытом соединении и служит для вызова диалогового окна изменения настроек ПО. 

Настройки сохраняются в корневом каталоге приложения. Следует помнить, что для того, чтобы измененные и сохраненные настройки были задействованы приложением, его необходимо перезапустить. При успешном сохранении настроек ПО отобразит соответствующий запрос пользователю.

Настройки в диалоговом окне собраны в группы для удобства, каждая группа располагается на отдельной вкладке.
Кнопка **"ВОССТАНОВИТЬ"** служит для восстановления настроек по умолчанию.  
Кнопка **"ОК"**, служащая для принятия настроек, активна только тогда, когда пользователем заданы непротиворечивые данные (например, при задействованных портах AUX имена для всех задействованных портов не должны совпадать друг с другом).

Вкладка **"СОЕДИНЕНИЕ"** содержит настройки портов соединения. Ее внешний вид показан на рисунке 8.

| ![ZHost settings window view](https://ucnl.github.io/documentation/zhost_setts_1.png) |
| :---: |
| **Рисунок 8 - Окно настроек** |
| _Вкладка "СОЕДИНЕНИЕ"_ |

Группа **"Порт ZMA"** активна всегда и отвечает за настройки соединения с базовой станцией [Zima-B](Zima_B_Specification_ru.md). В серийно выпускаемых устройствах поддерживается только скорость 9600 бит/с. 

Остальные группы **"Порт AUX1"**, **"Порт AUX2"** и **"Выходной порт"** становятся активны только если установлен соответствующий флажок. 

- Если система [Zima USBL](Zima_DataBrief_ru.md) используется с GNSS приемником с функцией определения азимута, то необходимо использовать только один из портов AUX, через который в систему поступают данные от этого приемника

- Если система [Zima USBL](Zima_DataBrief_ru.md) используется со стандартным GNSS-приемником, а данный о направлении поставляются от магнитного компаса, то следует использовать оба порта AUX, к одному из них подключается GNSS-приемник, а к другому - магнитный компас.

Если флажок **"Сохрянять AUX в журнал"** не установлен, то данные, приходящие из портов AUX не будут сохраняться в файл журнала.

Если система работает в абсолютных координатах (т.е. в неё поступают данные о географическом местоположении базовой станции и ориентации ее относительно сторон света) и вычисляются абсолютные геогрфические координаты маяков-ответчиков, то возникает возможность эмулировать сообщения GNSS **RMC** и **GGA** на основе геогрфического положения маяка и передавать их в выходной порт. 

Это может быть, например, виртуальный COM-порт, ко второму концу которого может подключаться картографическое ПО (например, SAS.Planet) для отображения местоположения маяка на карте в реальном времени. Для включения этой функции необходимо установить флажок **"Использовать выходной порт"** и задать требуемые настройки порта, а также указать адрес маяка, на основе координат которого будут эмулироваться данные GNSS. 

При установленном флажке **"Сохранять журнал отдельно"**, данные, передаваемый в выходной порт будут сохраняться в отдельный журнал.


Вкладка **"ОБЩИЕ"** содержит настройки адресов используемых маяков и некоторые физические параметры. Ее внешний вид показан на рисунке 9.

| ![ZHost settings window view](https://ucnl.github.io/documentation/zhost_setts_2.png) |
| :---: |
| **Рисунок 9 - Окно настроек** |
| _Вкладка "ОБЩИЕ"_ |

Группа **"Используемые маяки"** содержит список всех возможных адресов маяков. Система будет автоматически опрашивать маяки, напротив адресов которых в этом списке установлены флажки. 

Группа **"Временные интервалы"** содержит настройки:
- порога устаревания данных (в секундах). Если значение не обновлялось более указанного временного интервала, рядом с ним в скобках будут отобржаться символы OBS (Obsolete), указывая оператору на то, что данный конкретный параметр (например, температура воды или напряжение питания маяка) давно не обновлялся
- Максимальная дистанция. Данный параметр указывает системе максимальное расстояние, на котором может находится маяк-ответчик. Этот параметр ответчает за то, сколько базовая станция будет ожидать ответа маяка. Если по какой-либо причине станция не принимает ответный сигнал маяка, она ждет его в течении определенного времени, называемым времнем таймаута. Имеет смысл устанавливать минимально возможные значения исходя из требований задачи, для того, чтобы ограничить время простоя системы, когда она будет ожидать пропущенный ответ маяка.

Группа **"Соленость"** позволяет задать значение солености воды (в PSU) или напрямую, или выбрать из базы соленостей мирового окена (вызвав диалог выбора солености по ссылке **". . ."**. Не рекомендуется брать соленость из базы для малых внутренних водоемов: рек, озер, прудов и тп. В данном случае, если точно значение не известно, установить нулевую соленость (пресная вода).
Значение солености используется системой для более точного определения глубин и скорости звука.

Флажок **"Авторасчет скорости звука"** и управляемая им соответствующая группа отвечают за то, откуда система будет брать скорость звука в воде. Если это значение известно непосредственно из измерения, стоит отключить функцию автоматического расчета и указать значение напрямую. В остальных случаях флажок должен быть установлен. При этом система будет рассчитвать скорость звука по давлению, температуре и солености. Как правило, рассчетное значение хорошо согласуется с фактическим.

Группа **"Дополнительно"** содержит:
- Флажок **"Менее точная оценка глубины"**. Если эта функция включена, маяк будет передавать глубину с меньшим разрешением (~40 см), но при этом глубина будет передаваться за одну транзакцию "запрос-ответ", а фукнция одновременной навигации (отправка на маяк обратного азимута на базовую станцию и измерение маяком дистанции до базовой станции) будет недоступна. Если не требуется функция одновременной навигации (например, если применяется маяк в автономном исполнении) и точность в 40 см по глубине достаточна, следует установить данный флажок.
- Флажок **"Антенна неподвижна"** предназначен для ситуации, когда система работает в относительных координатах, а базовая станция закреплена неподвижно (например, на пирсе или другом стационарном объекте портовой инфраструктуры) так, что ее горизонтальная ось направлена на север. В таком режиме возможна передача обратного азимута на маяки-ответчики без необходимости наличия GNSS-приемника и компаса.

Вкладка **"ДОПОЛНИТЕЛЬНО"** содержит настройки ориентации базовой станции относительно точки топопривязки (антенны GNSS) и направления нуля компаса. Ее внешний вид показан на рисунке 10.

| ![ZHost settings window view](https://ucnl.github.io/documentation/zhost_setts_3.png) |
| :---: |
| **Рисунок 10 - Окно настроек** |
| _Вкладка "ДОПОЛНИТЕЛЬНО"_ |

- Параметры **"&Delta;X"** и **"&Delta;Y"** (в метрах) определяют расположение базовой станции в прямоугольной системе координат, связанной с антенной GNSS-приемника (согласно рисунку)
- Параметр **"&delta;"** (в градусах) задает поворот нуля антенны базовой станции относительно нуля магнитного или GNSS-компаса


##### 3.2.1.6 Пункт АВТОЗАПРОС
Данный пункт меню управляет режимом **"АВТОЗАПРОС"**. При включении этого режима ПО будет автоматически с максимально возможной скоростью опрашивать маяки-ответчики согласно списку **"Используемые маяки"** вкладки **"ОБЩИЕ"** окна настроек приложения.
Режим **"АВТОЗАПРОС"** является основным рабочим режимом системы и должен отключаться только в тех случая, когда навигационные данные не требуются или необходима передача пользовательской команды на один или несколько маяков (при включенном режиме **"АВТОЗАПРОС"** данная функция недоступна).

##### 3.2.1.7 Пункт АВТОСКРИНШОТ
Если данная функция включена, ПО будет автоматически сохранять изображение главного окна при обновлении данных. Файлы располагаются в каталоге **"\SNAPSHOTS\YYYY-DD-MM\"**, где **"YYYY-DD-MM"** - текущая дата. Каждый файл именуется согласно текущему времени в формате **"HH-MM-SS"** и имеет формат Portable Network Graphics (\*.png).

#### 3.2.2 Панель ПЛАН
На этой панели (см. рис. 7) в центре отображается положение базовой станции в виде желтой стрелки, которая ориентирована снизу вверх при работе в относительных координатах и изменяет свою ориентацию, при доступных данных курса. В последнем случае в верху лимба отображается символ **"N"** (North, Север).
Панель **"ПЛАН"** отображает положение маяков относительно базовой станции. Маяки отображаются в виде кружков с адресом маяка внутри. При возникновении таймаута (превышении интервала ожидания ответа маяка) соответствующие маяки отображаются пунктирной линией.

В левом верхнем углу отображается текущее состояние базовой станции:
- **TRX**: состояние приемопередатчика (TX - идет передача, RX - ожидание ответа, READY - готова к запросам)
- **DPT**: глубина (расстояние от поверхности воды) базовой станции по показаниям встроенного датчика давления
- **TMP**: температура воды по показаниям встроенного датчика температуры

В левом нижнем углу отображаются дополнительные данные, получаемые системой через порты AUX:
- **LAT, LON**: географичекие широта и долгота (из сообщений **RMC**)
- **AZM**: азимутальный угол (из сообщений **HDG** или **HDT**)
- **SPD**: скорость (из сообщений **VTG**)
- **VTG**: курс движения (из сообщений **VTG**)

#### 3.2.3 Панель МАЯКИ
Отображает данные маяков-ответчиков в виде древовидной структуры, где узлы первого уровня обозначают маяки (**"RESPONDER #ХХ"**), каждый из которых имеет набор узлов, обозначающих различные парметры и характеристики маяков в виде `Идентификатор параметра: Значение`. Ниже представлен список возможных идентификаторов параметров и их описания.

| Идентификатор параметра | Единицы измерения | Описание | Источник |
| :--- | :--- | :--- | :--- |
| **MSR** | дБ | Mean lobe-to-sidepeak ratio. Характеристика качества приема. Порог приема 14, значения выше 20 - хороший прием | Определяется базовой станцией при приеме ответа маяка |
| **DPL** | Гц | Доплеровский сдвиг несущей частоты | Определяетя базовой станцией при приема ответа маяка |
| **AZM** | ° | Азимут на маяк | Определяется базовой станцией при приеме ответа маяка |
| **DST** | м | Наклонная дальность до маяка | Определяется базовой станцией при приема ответа маяка |
| **STY** | PSU | Значение солености, которое было задано маяку | Из ответа маяка, который подтверждает задание параметра |
| **LQR** | - | Результат последнего сервисного запроса | Определяется логикой ПО ZHost |
| **TMP** | °C | Окружающая температура (температура воды) | Из ответа маяка, по данным встроенного датчика маяка |
| **BAT** | В | Напряжение питания маяка | Из ответа маяка, как результат прямого измерения |
| **LAT** | ° | Географическая широта маяка | Определяется логикой ПО ZHost |
| **LON** | ° | Географическая долгота маяка | Определяется логикой ПО ZHost |
| **DPT** | м | Глубина (расстояние от поверхности воды) маяка | Из ответа маяка, по данным встроенного датчика глубины |
| **DSTP** | м | Проекция наклонной дальности на поверхность воды | Определяется логикой ПО ZHost |

Справа от каждого значения отображется возраст данных - время, которое прошло с момента, когда значение параметра было обновлено. Возраст отображается только в том случае, если он превышает 7 секунд.

#### 3.2.3 Панель статуса
Располагается в нижней части окна и отображает состояние соответствующих устройств:
- **ZMA**: базовая станция
- **GNSS**: географическое положение
- **HDG**: источник данных об азимуте

<div style="page-break-after: always;"></div>

## 4. Эффективное применение навигационной системы Zima
Система  [Zima USBL](Zima_DataBrief_ru.md) является гидроакустической ультракороткобазисной системой, которая определяет относительное местоположение маяков-ответчиков по времени распространения акустического сигнала в воде и углу прихода ответного сигнала маяков-ответчиков.  
В связи с этим, эффективное ее применение основывается на соблюдении следующих условий:
- **обеспечение стабильного положения базовой станции во время работы**; Данное условие обеспечивается надежным закреплением базовой станции на вертикальной штанге, с учетом направления нуля антенны пеленгования. Угловые отклонения вертикальной оси станции от вертикали а также отклонения и колебания ее нуля негативно сказываются на точности определения угла прихода ответного сигнала;
- **обеспечение прямой видимости между базовой станцией и маяком-ответчиком;** Поскольку дистанция до маяка-ответчика определяется по времени распространения гидроакустического сигнала в воде, то любые препятствия на пути прохождения сигнала сильно искажают измеряемое время распространения, а следовательно и определяемую дистанцию до маяка-ответчика; к препятствиям можно отнести как естественные, связанные с рельефом дна и/или береговым профилем, так и искусственные - пирсы, причальные стенки, суда с глубокой осадкой, опоры мостов и иные технические сооружения;
- **рабочие поверхности должны быть свободны от различных загрязнений** (ил, грязь, водоросли и т. п.);

Ввиду специфики распространения звуковых колебаний в водной среде базовую станцию не следует располагать на глубине, меньшей, чем **2 - 3 ** метра и как минимум **1.5** метра от нижней части киля для малых лодок и не менее **2 - 3** метров для крупных лодок. 

Антенная решетка базовой станции предназначена для определения горизонтального угла прихода сигнала маяков-ответчиков, поэтому стоит помнить, что при таком взаимном расположении антенны и маяка-ответчика, когда они находятся практически на одной вертикальной оси, точность определения местоположения ответчика будет минимальной. Хорошим взаимным расположением антенны и маяка-ответчика считается такое, при котором проекция наклонной дальности на водную поверхность значительно превышает проекцию ее на вертикальную ось.
Рабочими вертикальными углами базовой станции [Zima-B](Zima_B_Specification_ru.md) являются углы +/- 30° от горизонтальной плоскости, проходящей через антенную решетку базовой станции. Данное положени проиллюстрировано на рисунке 11:

| ![Zima-B angular zones](https://ucnl.github.io/documentation/zima_dir.png) |
| :---: |
| **Рисунок 11 - Геометрические ограничения [Zima-B](Zima_B_Specification_ru.md)** |
| _1 - рабочая зона (+/- 30°), 2 - зона снижения точности (30 .. 45°), 3 - теневая зона ( > 45°), 4 - пеленгационная антенна. Отклонение указывается от горизонтальной плоскости, проходящей через центр антенной решетки_ |

<div style="page-break-after: always;"></div>

## 5. Возможные неисправности, их диагностика и устранение

| № | Симптомы | Возможная причина | Устранение |
| :---: | :--- | :--- | :--- |
| 1 | Не удается установить соединение ZHost и Zima-B (Ошибка “Нет доступа к COM-порту) | Особенность работы драйверов преобразователя RS422-USB в системах Win8-10 | 1. Отключить питание станции Zima-B <br/> 2. Отсоединить разъем USB <br/> 3. Закрыть приложение ZHost <br/> 4. Подсоединить разъем USB <br/> 5. Запустить приложение ZHost <br/> 6. Нажать кнопку **СОЕДИНЕНИЕ** в ZHost <br/> 7. Подать питание на станцию Zima-B |
| 2 | Станция излучает запросный сигнал, но маяк не отвечает | Гидрология не позволяет обеспечить устойчивую связь | Проверить исправность маяка на малой дистанции (0.5-10 метров) в прямой видимости |
|   |   | Не подключен разъем питания на маяке | Подключить разъем | 
|   |   | Разряжен АКБ батарейного блока маяка	| Зарядить или заменить батарейный блок |
|   |   | Запрашиваемый адрес маяка не соответствует его фактическому | В настройках ZHost выбрать все доступные адреса, станция переберет все поочередно и таким образом адрес маяка будет установлен |
|   |    | Возможно, сигнал излучается неполностью и станции не хватает питания | Такое возможно при питании станции от источников питания, имеющих ограничение по току. Для нормальной работы в режиме передачи станции необходимо порядка 3А |
| 3 | Нет связи со станцией Zima-B, порт открыт, но станция не передает данные | На станцию не приходит питание | Проверить источник питания и соединительные кабеля |
|   |   | Станция неисправна | Заменить станцию |
| 4 | Определяемый угол прихода имеет статическую ошибку | Нулевые направления станции и компаса (или продольной оси судна) расположены под углом - станция повернута в хомуте | Совместить нулевое направление станции с продольной осью судна и/или нулевым направлением компаса и исключить случайное проворачивание антенны в хомуте |
| 5 | Система работает, маяк отвечает но абсолютное местоположение маяка не вычисляется (при подключенном внешнем GNSS-приемнике, компасе или GNSS-компасе) | Не обновляются данные о географическом положении и курсе судна | Проверить исправность GNSS-приемника и магнитного/GNSS компаса а также соединительных кабелей и настроек портов |

<div style="page-break-after: always;"></div>

## 6. Обязательства и отказ от ответственности
### 6.1 Условия замены и бесплатного гарантийного обслуживания
Гарантия производителя распространяется только на заводские дефекты, выявивщиеся при эксплуатации устройства в соответствие с настоящим руководством в течении гарантийного срока (2 года с момента покупки).  

Производитель гарантирует бесплатный ремонт или замену неисправного оборудования из комплекта поставки, вышедшего из строя по причине заводского дефекта.  

К поводам для отказа от бесплатного гарантийного обслуживания, бесплатного ремонта и замены относятся:
- любые **механические повреждения** оборудования из комплекта поставки, в т.ч. нарушение изоляции проводов и кабелей;
- любые **повреждения, вызванные воздействием влаги и загрязнейний**, вследствие неправильной эксплуатации оборудования из комплекта поставки;
- любые **электрические повреждения**, вызванные **использованием некомплектных аксессуаров**; к некомплектным не отностятся аксессуары, поставленные производителем или его представителем в замен неисправных или утраченых;
- любые **следы самостоятельного ремонта и/или вскрытия** оборудования из комплекта поставки.

<div style="page-break-after: always;"></div>

### 6.2 Ограничение ответственности производителя

_____________

_**ЛЮБАЯ ИЗ ЧАСТЕЙ КОМПЛЕКТА ПОСТАВКИ В ОТДЕЛЬНОСТИ И В СОСТАВЕ СИСТЕМЫ, ИМЕНУЕМЫЕ ДАЛЕЕ "ПОСТАВЛЯЕМОЕ ОБОРУДОВАНИЕ":**_

_**- НЕ РАЗРАБАТЫВАЛОСЬ КАК СРЕДСТВО СПАСЕНИЯ**_  
_**- НЕ ТЕСТИРОВАЛОСЬ, КАК СРЕДСТВО СПАСЕНИЯ**_  
_**- НЕ ЯВЛЯЕТСЯ СРЕДСТВОМ СПАСЕНИЯ**_  
_**- ПРОИЗВОДИТЕЛЬ ЗАЯВЛЯЕТ, ЧТО ПОСТАВЛЯЕМОЕ ОБОРУДОВАНИЕ БЕЗОПАСНО ПРИ ЭКСПЛУАТАЦИИ СОГЛАСНО НАСТОЯЩЕЙ ИНСТРУКЦИИ И НЕ ОТВЕЧАЕТ ЗА ЛЮБЫЕ ПОСЛЕДСТВИЯ ИСПОЛЬЗОВАНИЯ ПОСТАВЛЯЕМОГО ОБОРУДОВАНИЯ**_


